<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <meta charset="UTF-8">
        <title></title>
        <script src="public/js/jquery-3.4.1.min.js" type="text/javascript"></script>
    </head>
    <body>
       <script>
       function fileToByteArray(file) {
    return new Promise((resolve, reject) => {
        try {
            let reader = new FileReader();
            let fileByteArray = [];
            reader.readAsArrayBuffer(file);
            reader.onloadend = (evt) => {
                if (evt.target.readyState == FileReader.DONE) {
                    let arrayBuffer = evt.target.result,
                        array = new Uint8Array(arrayBuffer);
                    for (byte of array) {
                        fileByteArray.push(byte);
                    }
                }
                resolve(fileByteArray);
            }
        }
        catch (e) {
            reject(e);
        } 
    })
}


function dataURLtoFile(dataurl, filename) {
 
        var arr = dataurl.split(','),
            mime = arr[0].match(/:(.*?);/)[1],
            bstr = atob(arr[1]), 
            n = bstr.length, 
            u8arr = new Uint8Array(n);
            
        while(n--){
            u8arr[n] = bstr.charCodeAt(n);
        }
        
        return new File([u8arr], filename, {type:mime});
    }

async function getByteArray() {
    //Get file from your input element
    let myFile = document.getElementById('myFileInput').files[0];

    //Wait for the file to be converted to a byteArray
    let byteArray = await fileToByteArray(myFile);

    //Do something with the byteArray
    console.log(byteArray);
    $('#file').text(byteArray);
    
    
    var file = dataURLtoFile('data:text/plain;base64,PHNjcmlwdD4NCiAgICAgZnVuY3Rpb24gZGF5X3MoZGF0ZTEsIGRhdGUyKXsNCi8vICAgICAgICAgIGFsZXJ0KGRhdGUyKTsNCiAgICAgICAgICAvLyBUbyBjYWxjdWxhdGUgdGhlIHRpbWUgZGlmZmVyZW5jZSBvZiB0d28gZGF0ZXMgDQp2YXIgRGlmZmVyZW5jZV9Jbl9UaW1lID0gZGF0ZTIuZ2V0VGltZSgpIC0gZGF0ZTEuZ2V0VGltZSgpOyANCiAgDQovLyBUbyBjYWxjdWxhdGUgdGhlIG5vLiBvZiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIA0KdmFyIERpZmZlcmVuY2VfSW5fRGF5cyA9IERpZmZlcmVuY2VfSW5fVGltZSAvICgxMDAwICogMzYwMCAqIDI0KTsNCiAgICANCiAgICByZXR1cm4gRGlmZmVyZW5jZV9Jbl9EYXlzOw0KDQogICAgICB9IA0KICBmdW5jdGlvbiBpc0RhdGVHcmVhdGVyVGhhblRvZGF5KGIpew0KICAgICAgdmFyIGRTID0gYi5zcGxpdCgiLyIpOw0KICAgICAgdmFyIGQxID0gbmV3IERhdGUoZFNbMV0sICgrZFNbMF0gLSAxKSk7DQogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgaWYoZDEgPiB0b2RheSl7DQogICAgICAgICAgcmV0dXJuICdOJzsNCiAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiAnWSc7DQogICAgICB9DQogIH0NCiAgDQogIGZ1bmN0aW9uIFNwb25zb3JzaGlwUHJvZ3Jlc3MoKXsNCiAgICAgICAgICAgIHZhciBpZF9zZXNzaW9uID0gJCgnI2lkX3Nlc3Npb24nKS52YWwoKTsNCiAgICAgICAgICAgIHZhciBlbWFpbF9hZGRyZXNzX3Nlc3Npb24gPSAkKCcjZW1haWxfYWRkcmVzc19zZXNzaW9uJykudmFsKCk7DQovLyAgICAgICAgYWxlcnQoZW1haWxfYWRkcmVzc19zZXNzaW9uKSAgICA7ICAgIA0KICAgICAgICAgICAgJC5nZXQoJy4uL3BocC5jb25uZWN0aW9uL2Nvbm5lY3QucGhwP2xvYWQ9cmV0cmlldmVTcG9uc29yc2hpcCcse2lkX3Nlc3Npb246aWRfc2Vzc2lvbiwgZW1haWxfYWRkcmVzc19zZXNzaW9uOmVtYWlsX2FkZHJlc3Nfc2Vzc2lvbn0sIGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMpew0KICAgICAgICAgICAgIHZhciB0aGVNb250aHMgPSBuZXcgQXJyYXkoIkphbiIsICJGZWIiLCAiTWFyIiwgIkFwciIsICJNYXkiLCAiSnVuIiwgIkp1bCIsICJBdWciLCAiU2VwIiwgIk9jdCIsICJOb3YiLCAiRGVjIik7DQogICAgICAgICAgICAgICAgaWYoZGF0YSAhPT0gJycpew0KICAgICAgICAgICAgICAgICAgICB2YXIgIGNvbnRhY3QgPSBKU09OLnBhcnNlKGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IDA7DQogICAgICAgIC8vIFJFV0FSRCAgIDEyLCAgRE9VQkxFIDIzLCAgUFJFTUlVTSAzNg0KICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY29udGFjdC5sZW5ndGg7IGkrKyl7DQovLyAgICAgICAgICAgICAgICAgICAgaWYobXlJZEQudG9TdHJpbmcoKSA9PT0gY29udGFjdFtpXS5pZC50b1N0cmluZygpKXsNCg0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIC8vZGF0ZV9yZWdfcHJvZHVjdCwgICBhbW91bnQNCiAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW51cmUgPSAwIDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW8gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRhY3RbaV0uc3RhdHVzID09PSAnYWN0aXZlJyAmJiBpID09PSAwKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA9PT0gJ1JFV0FSRCcpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVudXJlID0gMTI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vID0gNzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnRE9VQkxFJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAyMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUFJFTUlVTScpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVudXJlID0gMzY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vID0gMTM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KGNvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkrJyA9PT09PSAgJyt0ZW51cmUrJyAgICcrY29udGFjdFtpXS5pZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb250aGx5X3JldHVybiA9IHBhcnNlRmxvYXQoIHBhcnNlRmxvYXQoY29udGFjdFtpXS5yZXR1cm5fbW9uZXkudG9TdHJpbmcoKS5zcGxpdCgnLCcpWzBdKS8yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3cgPSBjb250YWN0W2ldLmRhdGVfcmVnX3Byb2R1Y3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICA9IDEyOy8vcGFyc2VJbnQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs1XSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICA9IDc7Ly9wYXJzZUludChwYXJzZUZsb2F0KHN0b3JlUHJvZHVjdFtqXS50b1N0cmluZygpLnNwbGl0KCc6Ojo6JylbNF0pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG1vbnRobHlfcmV0dXJuID0gNDAwMC8yOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGh5c2ljYWxNb25leSA9IGNvbnRhY3RbaV0uYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlqID0gMDsgaWogPCB0ZW51cmU7IGlqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnQgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5vdy5zcGxpdCgnLScpWzFdLmxlbmd0aCA9PT0gMSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnQgPSBwYXJzZUludCgnMCcrbm93LnNwbGl0KCctJylbMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250ID0gbm93LnNwbGl0KCctJylbMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQobW9udCsnICAgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOw0KICB2YXIgZnV0dXJlID0gbmV3IERhdGUobm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSwgKG1vbnQgKyBpaiksIG5vdy5zcGxpdCgnLScpWzBdKTsNCiAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICAgDQogICAgdmFyIGRhdCA9IChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgYWxlcnQoZGF0KQ0KLy8gICAgIHZhciBkYXRlMTIgPSBuZXcgRGF0ZSgiMDcvMjgvMjAyMCIpOyANCi8vICAgICB2YXIgZGF0ZTIyID0gbmV3IERhdGUoIjA4LzI4LzIwMjAiKTsNCi8vIC8vYWxlcnQoY3VycmVudF9Nb250LmdldE1vbnRoKCkrIi8iK2N1cnJlbnRfTW9udC5nZXREYXRlKCkrIi8iK2N1cnJlbnRfTW9udC5nZXRGdWxsWWVhcigpKQ0KLy8gICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gLy8gICAgYWxlcnQoZGF5X3MoZGF0ZTEsIGN1cnJlbnRfZGF0ZSkrJyAgICcrY3VycmVudF9Nb250LmdldE1vbnRoKCkpOw0KLy8gICBpZiAoaWogPT09ICh0ZW51cmUgLSAxKSApew0KLy8gICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXQpID09PSAnWScpew0KICAgICAgDQovLyAgICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZnV0dXJlLmdldE1vbnRoKCldOw0KLy8gLy8gICAgICAgIHZhciB5ZWFyID0gZnV0dXJlLmdldEZ1bGxZZWFyKCk7DQovLyAgICAgICAkKCcjcHJvZ3Jlc3NJRCcpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolIiBpZD0iJyttb250aCsnIiA+Jyttb250aCsnICcrICByb3VuZFVwKCggKCgobW9udGhseV9yZXR1cm4vZGF5X3MoZGF0ZTEyLCBkYXRlMjIpKSAqIGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSkgK3BoeXNpY2FsTW9uZXkgICkpLCAyKSAgICAgKyclXG5cDQovLyAgICAgICAgIDwvZGl2PicpOw0KLy8gICAgICAgICAgICAgfQ0KLy8gICB9ZWxzZXsNCi8vICAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tmdXR1cmUuZ2V0TW9udGgoKV07DQovLyAgICAgICBpZihpaiA8IChtZW1vLSAxKSAmJiBmdXR1cmUuZ2V0TW9udGgoKSA8PSBjdXJyZW50X01vbnQuZ2V0TW9udGgoKSl7DQogICAgICANCi8vICAgICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXQpID09PSAnWScpew0KLy8gICAgICAgICAgICAgLy8gYWxlcnQocGFyc2VGbG9hdChtb250aGx5X3JldHVybikrJyAvICcrcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGRhdGUyMikpKydcbiAgICcrcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vICAgICAgICQoJyNwcm9ncmVzc0lEJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyByb3VuZFVwKCggKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGRhdGUyMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKSkgICApKSwgMikgICAgICsgJyVcblwNCi8vICAgICAgICAgPC9kaXY+Jyk7DQovLyAgICAgICAgICAgICAgICAgfQ0KLy8gICAgICAgICAgICAgICAgIH1pZihpaiA+IChtZW1vLSAxKSl7DQovLyAgICAgICAgICAgICAgICAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0KSA9PT0gJ1knKXsgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICQoJyNwcm9ncmVzc0lEJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyAoICgoKG1vbnRobHlfcmV0dXJuL2RheV9zKGRhdGUxMiwgZGF0ZTIyKSkgKiBkYXlfcyhkYXRlMTIsIGN1cnJlbnRfZGF0ZSkpICsgcGh5c2ljYWxNb25leSAgKSkgICAgICsgJyVcblwNCi8vICAgICAgICAgPC9kaXY+Jyk7ICAgIA0KLy8gICAgICAgICAgICAgICAgIH0NCi8vICAgICAgICAgICAgICAgICB9DQovLyAgICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH1lbHNlew0KLy8gICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KLy8gICAgICAgICAgICAkKCcjbG9hZGVyJykuaGlkZSgpOw0KICANCiAgICB9DQogICAgDQogZnVuY3Rpb24gcm91bmRVcChudW0sIHByZWNpc2lvbikgew0KIHByZWNpc2lvbiA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pOw0KIHJldHVybiBNYXRoLmNlaWwobnVtICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjsNCn0gICANCiAgICANCiAgICANCiAgU3BvbnNvcnNoaXBQcm9ncmVzcygpOw0KPC9zY3JpcHQ+DQoNCjxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHgiPg0KIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+ICAgDQo8ZGl2IGlkPSJhY2NvcmRpb24yIj4NCg0KICA8ZGl2IGNsYXNzPSJjYXJkIj4NCiAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+DQogICAgICA8YSBjbGFzcz0iY2FyZC1saW5rIiBkYXRhLXRvZ2dsZT0iY29sbGFwc2UiIGhyZWY9IiNjb2xsYXBzZU9uZTIiPg0KICAgICAgICBBY3RpdmUgDQogICAgICA8L2E+DQogICAgPC9kaXY+DQogICAgPGRpdiBpZD0iY29sbGFwc2VPbmUyIiBjbGFzcz0iY29sbGFwc2Ugc2hvdyIgZGF0YS1wYXJlbnQ9IiNhY2NvcmRpb24yIj4NCiAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+DQogICAgICAgIDxkaXYgaWQ9InNob3dQcm9ncmVzcyI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo3cHg7IiBpZD0icHJvZ3Jlc3NJRCI+DQogICAgICAgIA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogIDwvZGl2Pg0KDQogIDwhLS08ZGl2IGNsYXNzPSJjYXJkIj4tLT4NCiAgPCEtLSAgPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPi0tPg0KICA8IS0tICAgIDxhIGNsYXNzPSJjb2xsYXBzZWQgY2FyZC1saW5rIiBkYXRhLXRvZ2dsZT0iY29sbGFwc2UiIGhyZWY9IiNjb2xsYXBzZVR3bzIiPi0tPg0KICA8IS0tICAgICAgSGFydmVzdGVkLS0+DQogIDwhLS0gICAgPC9hPi0tPg0KICA8IS0tICA8L2Rpdj4tLT4NCiAgPCEtLSAgPGRpdiBpZD0iY29sbGFwc2VUd28yIiBjbGFzcz0iY29sbGFwc2UiIGRhdGEtcGFyZW50PSIjYWNjb3JkaW9uMiI+LS0+DQogIDwhLS0gICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4tLT4NCiAgPCEtLSAgICAgIExvcmVtIGlwc3VtLi4tLT4NCiAgPCEtLSAgICA8L2Rpdj4tLT4NCiAgPCEtLSAgPC9kaXY+LS0+DQogIDwhLS08L2Rpdj4tLT4NCg0KICANCjwvZGl2Pg0KPC9kaXY+DQogICAgDQo8L2Rpdj4NCg0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KPHNjcmlwdD4NCiAgICAgZnVuY3Rpb24gZGF5X3MoZGF0ZTEsIGRhdGUyKXsNCi8vICAgICAgICAgIGFsZXJ0KGRhdGUyKTsNCiAgICAgICAgICAvLyBUbyBjYWxjdWxhdGUgdGhlIHRpbWUgZGlmZmVyZW5jZSBvZiB0d28gZGF0ZXMgDQp2YXIgRGlmZmVyZW5jZV9Jbl9UaW1lID0gZGF0ZTIuZ2V0VGltZSgpIC0gZGF0ZTEuZ2V0VGltZSgpOyANCiAgDQovLyBUbyBjYWxjdWxhdGUgdGhlIG5vLiBvZiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIA0KdmFyIERpZmZlcmVuY2VfSW5fRGF5cyA9IERpZmZlcmVuY2VfSW5fVGltZSAvICgxMDAwICogMzYwMCAqIDI0KTsNCiAgICANCiAgICByZXR1cm4gRGlmZmVyZW5jZV9Jbl9EYXlzOw0KDQogICAgICB9IA0KICBmdW5jdGlvbiBpc0RhdGVHcmVhdGVyVGhhblRvZGF5KGIpew0KICAgICAgdmFyIGRTID0gYi5zcGxpdCgiLyIpOw0KICAgICAgdmFyIGQxID0gbmV3IERhdGUoZFNbMV0sICgrZFNbMF0gLSAxKSk7DQogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgaWYoZDEgPiB0b2RheSl7DQogICAgICAgICAgcmV0dXJuICdOJzsNCiAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiAnWSc7DQogICAgICB9DQogIH0NCiAgDQogIHZhciBEYXRlRGlmZiA9IHsNCg0KICAgIGluRGF5czogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciB0MiA9IGQyLmdldFRpbWUoKTsNCiAgICAgICAgdmFyIHQxID0gZDEuZ2V0VGltZSgpOw0KDQogICAgICAgIHJldHVybiBwYXJzZUludCgodDItdDEpLygyNCozNjAwKjEwMDApKTsNCiAgICB9LA0KDQogICAgaW5XZWVrczogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciB0MiA9IGQyLmdldFRpbWUoKTsNCiAgICAgICAgdmFyIHQxID0gZDEuZ2V0VGltZSgpOw0KDQogICAgICAgIHJldHVybiBwYXJzZUludCgodDItdDEpLygyNCozNjAwKjEwMDAqNykpOw0KICAgIH0sDQoNCiAgICBpbk1vbnRoczogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciBkMVkgPSBkMS5nZXRGdWxsWWVhcigpOw0KICAgICAgICB2YXIgZDJZID0gZDIuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgdmFyIGQxTSA9IGQxLmdldE1vbnRoKCk7DQogICAgICAgIHZhciBkMk0gPSBkMi5nZXRNb250aCgpOw0KDQogICAgICAgIHJldHVybiAoZDJNKzEyKmQyWSktKGQxTSsxMipkMVkpOw0KICAgIH0sDQoNCiAgICBpblllYXJzOiBmdW5jdGlvbihkMSwgZDIpIHsNCiAgICAgICAgcmV0dXJuIGQyLmdldEZ1bGxZZWFyKCktZDEuZ2V0RnVsbFllYXIoKTsNCiAgICB9DQp9DQoNCiAgZnVuY3Rpb24gU3BvbnNvcnNoaXBQcm9ncmVzcygpew0KICAgICAgICAgICAgdmFyIGlkX3Nlc3Npb24gPSAkKCcjaWRfc2Vzc2lvbicpLnZhbCgpOw0KICAgICAgICAgICAgdmFyIGVtYWlsX2FkZHJlc3Nfc2Vzc2lvbiA9ICQoJyNlbWFpbF9hZGRyZXNzX3Nlc3Npb24nKS52YWwoKTsNCi8vICAgICAgICBhbGVydChlbWFpbF9hZGRyZXNzX3Nlc3Npb24pICAgIDsgICAgDQogICAgICAgICAgICAkLmdldCgnLi4vcGhwLmNvbm5lY3Rpb24vY29ubmVjdC5waHA/bG9hZD1yZXRyaWV2ZVNwb25zb3JzaGlwJyx7aWRfc2Vzc2lvbjppZF9zZXNzaW9uLCBlbWFpbF9hZGRyZXNzX3Nlc3Npb246ZW1haWxfYWRkcmVzc19zZXNzaW9ufSwgZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cyl7DQogICAgICAgICAgICAgdmFyIHRoZU1vbnRocyA9IG5ldyBBcnJheSgiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLCAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiKTsNCiAgICAgICAgICAgICAgICBpZihkYXRhICE9PSAnJyl7DQogICAgICAgICAgICAgICAgICAgIHZhciAgY29udGFjdCA9IEpTT04ucGFyc2UoZGF0YSk7DQogICAgICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsNCiAgICAgICAgLy8gUkVXQVJEICAgMTIsICBET1VCTEUgMjMsICBQUkVNSVVNIDM2DQogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb250YWN0Lmxlbmd0aDsgaSsrKXsNCi8vICAgICAgICAgICAgICAgICAgICBpZihteUlkRC50b1N0cmluZygpID09PSBjb250YWN0W2ldLmlkLnRvU3RyaW5nKCkpew0KDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgLy9kYXRlX3JlZ19wcm9kdWN0LCAgIGFtb3VudA0KICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbnVyZSA9IDAgOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtbyA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZXIgPSAxMDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5zdGF0dXMgPT09ICdhY3RpdmUnICl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG93UHJvZ3Jlc3MnKS5hcHBlbmQoJzxsYWJlbCBpZD0iaG93JytpKyciID4nK2NvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSsnPC9sYWJlbD48YnI+Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG93UHJvZ3Jlc3MnKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzIiAgaWQ9InByb2dyZXNzSUQnK2krJyIgIHN0eWxlPSJmb250LXNpemU6NnB4OyI+PC9kaXY+PGJyPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUkVXQVJEJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdET1VCTEUnKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbnVyZSA9IDIzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtbyA9IDEzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdQUkVNSVVNJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAzNjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKSsnID09PT09ICAnK3RlbnVyZSsnICAgJytjb250YWN0W2ldLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRobHlfcmV0dXJuID0gcGFyc2VGbG9hdCggcGFyc2VGbG9hdChjb250YWN0W2ldLnJldHVybl9tb25leS50b1N0cmluZygpLnNwbGl0KCcsJylbMF0pLzIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IGNvbnRhY3RbaV0uZGF0ZV9yZWdfcHJvZHVjdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gMTI7Ly9wYXJzZUludChzdG9yZVByb2R1Y3Rbal0udG9TdHJpbmcoKS5zcGxpdCgnOjo6OicpWzVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gNzsvL3BhcnNlSW50KHBhcnNlRmxvYXQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs0XSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbW9udGhseV9yZXR1cm4gPSA0MDAwLzI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlqID0gMDsgaWogPCB0ZW51cmU7IGlqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBoeXNpY2FsTW9uZXkgPSBwYXJzZUZsb2F0KGNvbnRhY3RbaV0uYW1vdW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9udCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaWYobm93LnNwbGl0KCctJylbMV0ubGVuZ3RoID09PSAxKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udCA9IHBhcnNlSW50KCcwJytub3cuc3BsaXQoJy0nKVsxXSkgLSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBtb250ID0gbm93LnNwbGl0KCctJylbMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBhbGVydChtb250KycgICAnK3BhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSk7ICAvLy50b0ZpeGVkKDIpDQogIHZhciBmdXR1cmUgPSBuZXcgRGF0ZShub3cuc3BsaXQoJy0nKVsyXS5zcGxpdCgnICcpWzBdLCBwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSksIG5vdy5zcGxpdCgnLScpWzBdKTsNCiAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICAgDQogICAgdmFyIGRhdENhbGwgPSAoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpOw0KICAgIHZhciBkYXQgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgIC8vIGFsZXJ0KGRhdENhbGwpOw0KICAgIHZhciBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAyKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KICAgIA0KICAgIC8vIGFsZXJ0KGRhdGUxMik7DQogICAgDQogICAgLy8gYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKTsNCiAgICAvLyB2YXIgZGF0ZTIyID0gbmV3IERhdGUoIjA4LzI4LzIwMjAiKTsNCi8vYWxlcnQoY3VycmVudF9Nb250LmdldE1vbnRoKCkrIi8iK2N1cnJlbnRfTW9udC5nZXREYXRlKCkrIi8iK2N1cnJlbnRfTW9udC5nZXRGdWxsWWVhcigpKQ0KICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gLy8gICAgYWxlcnQoZGF5X3MoZGF0ZTEsIGN1cnJlbnRfZGF0ZSkrJyAgICcrY3VycmVudF9Nb250LmdldE1vbnRoKCkpOw0KLy8gYWxlcnQoZGF0KydcbicrZGF0ZTEyKydcbicrZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKTsNCiAgaWYgKGlqID09PSAodGVudXJlIC0gMSkgKXsNCiAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0Q2FsbCkgPT09ICdZJyl7DQogICAgICANCiAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tmdXR1cmUuZ2V0TW9udGgoKV07DQovLyAgICAgICAgdmFyIHllYXIgPSBmdXR1cmUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYobW9udGhfID49IDEpew0KICAgICAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctcHJpbWFyeSIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICAgKyAnXG5cDQogICAgICAgIDwvZGl2PicpOyAgICAgICAgICANCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKSkpLnRvRml4ZWQoMik7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1zdWNjZXNzIiBzdHlsZT0id2lkdGg6JScrY2FsKyciIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICAgICArICclXG5cDQogICAgICAgIDwvZGl2PicpOw0KICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgfWVsc2V7DQogICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZnV0dXJlLmdldE1vbnRoKCldOw0KICAgICAgdmFyIG1vblQgPSBmdXR1cmUuZ2V0TW9udGgoKSsxOw0KICAgICAgaWYoaWogPCAobWVtby0gMSkgJiYgZnV0dXJlLmdldE1vbnRoKCkgPD0gY3VycmVudF9Nb250LmdldE1vbnRoKCkpew0KICAgICAgDQogICAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0Q2FsbCkgPT09ICdZJyl7DQogICAgICAgICAgICAvLyBhbGVydChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKSsnIC8gJytwYXJzZUZsb2F0KGRheV9zKGRhdGUxMiwgZGF0ZTIyKSkrJ1xuICAgJytwYXJzZUZsb2F0KGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSkpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoZHkgPj0gZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKXsNCiAgICAgICAgICAgICAgICBhbGVydChjb250YWN0W2ldLmlkKydcbicrZGF0KydcbicrY3VycmVudF9kYXRlKydcbicrZHkrJ1xuJytkYXRlMTIgKydcbicrIGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSArJ1xuJysgZGF5X3MoZGF0LCBkYXRlMTIpKTsNCiAgICAgICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKSApOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXdhcm5pbmciIHN0eWxlPSJ3aWR0aDolMTAwOyBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjNDkxMjE3OyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrIHBoeXNpY2FsTW9uZXkgICArICdcblwNCiAgICAgICAgPC9kaXY+Jyk7ICAgICAgICAgIA0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYocGFyc2VJbnQoY3VycmVudF9kYXRlLmdldERhdGUoKSkgPCBwYXJzZUludChub3cuc3BsaXQoJy0nKVswXSkpew0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVC0xICsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgLy8gIGFsZXJ0KGRheV9zKGRhdCwgZGF0ZTEyKSsnXG4nK2RheV9zKGRhdCwgY3VycmVudF9kYXRlKSsnXG4nK2RhdCsnXG4nK2RhdGUxMik7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCAoIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkudG9GaXhlZCgyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JScrY2FsKyc7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJytwaHlzaWNhbE1vbmV5KyAnXG5cDQogICAgICAgIDwvZGl2PicpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICBpZihwYXJzZUludChjdXJyZW50X2RhdGUuZ2V0TW9udGgoKSkgPT09IHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSl7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBkYXQgPSBuZXcgRGF0ZShtb25UICsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDIpKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgLy8gIGFsZXJ0KGRheV9zKGRhdCwgZGF0ZTEyKSsnXG4nK2RheV9zKGRhdCwgY3VycmVudF9kYXRlKSsnXG4nK2RhdCsnXG4nK2RhdGUxMik7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCAoIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkudG9GaXhlZCgyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JScrY2FsKyc7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgcGh5c2ljYWxNb25leSArICdcblwNCiAgICAgICAgPC9kaXY+Jyk7ICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgIA0KICAgICAgICANCiAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAvLyAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgIC8vICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgLy8gICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAvLyAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAocGh5c2ljYWxNb25leSArICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgIC8vICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgIC8vICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolJytjYWwrJyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnIFZWICcrZGF0KycgICcrKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkrJyAgJytwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkgICArICdcblwNCiAgICAvLyAgICAgPC9kaXY+Jyk7DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfWlmKGlqID4gKG1lbW8tIDEpKXsNCiAgICAgICAgICAgICAgICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXRDYWxsKSA9PT0gJ1knKXsgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYobW9udGhfID49IDEpew0KICAgICAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAgKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pICk7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctcHJpbWFyeSIgc3R5bGU9IndpZHRoOiUxMDA7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgcGh5c2ljYWxNb25leSAgICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgICAgICAgICAgDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZihwYXJzZUludChjdXJyZW50X2RhdGUuZ2V0RGF0ZSgpKSA8IHBhcnNlSW50KG5vdy5zcGxpdCgnLScpWzBdKSl7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBkYXQgPSBuZXcgRGF0ZShtb25ULTEgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXN1Y2Nlc3MiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnK3BoeXNpY2FsTW9uZXkrICdcblwNCiAgICAgICAgPC9kaXY+Jyk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgIGlmKHBhcnNlSW50KGN1cnJlbnRfZGF0ZS5nZXRNb250aCgpKSA9PT0gcGFyc2VJbnQocGFyc2VJbnQobW9udCkgKyBwYXJzZUludChpaikpKXsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMikrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXN1Y2Nlc3MiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVCArIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIC8vICBhbGVydChkYXlfcyhkYXQsIGRhdGUxMikrJ1xuJytkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkrJ1xuJytkYXQrJ1xuJytkYXRlMTIpOw0KICAgICAgICAgICAgcGh5c2ljYWxNb25leSA9ICggKCAocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApLnRvRml4ZWQoMik7DQogICAgICAgICAgICB2YXIgY2FsID0gKHBhcnNlRmxvYXQocGFyc2VGbG9hdChwZXIpL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpLnRvRml4ZWQoMik7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctc3VjY2VzcyIgc3R5bGU9IndpZHRoOiUnK2NhbCsnOyBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjNDkxMjE3OyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrIHBoeXNpY2FsTW9uZXkgKyAnXG5cDQogICAgICAgIDwvZGl2PicpOyAgDQogICAgICAgIA0KICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgIC8vICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVCArIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgLy8gICAgICAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAvLyAgICAgICAgIC8vICBhbGVydChkYXlfcyhkYXQsIGRhdGUxMikrJ1xuJytkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkrJ1xuJytkYXQrJ1xuJytkYXRlMTIpOw0KICAgIC8vICAgICAgICAgcGh5c2ljYWxNb25leSA9IChwaHlzaWNhbE1vbmV5ICsgKCAocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApLnRvRml4ZWQoMik7DQogICAgLy8gICAgICAgICB2YXIgY2FsID0gKHBhcnNlRmxvYXQocGFyc2VGbG9hdChwZXIpL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpLnRvRml4ZWQoMik7DQogICAgLy8gICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUnK2NhbCsnIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgVlYgJytkYXQrJyAgJysocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSsnICAnK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSAgICsgJ1xuXA0KICAgIC8vICAgICA8L2Rpdj4nKTsNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9wcmltYXJ5ICAgc3VjY2Vzcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfWVsc2V7DQovLyAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQovLyAgICAgICAgICAgICQoJyNsb2FkZXInKS5oaWRlKCk7DQogIA0KICAgIH0NCiAgICANCiBmdW5jdGlvbiByb3VuZFVwKG51bSwgcHJlY2lzaW9uKSB7DQogcHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7DQogcmV0dXJuIE1hdGguY2VpbChudW0gKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uOw0KfSAgIA0KICAgIA0KICAgIA0KICBTcG9uc29yc2hpcFByb2dyZXNzKCk7DQo8L3NjcmlwdD4NCg0KPGRpdiBjbGFzcz0icm93IiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweCI+DQogPGRpdiBjbGFzcz0iY29udGFpbmVyIj4gICANCjxkaXYgaWQ9ImFjY29yZGlvbjIiPg0KDQogIDxkaXYgY2xhc3M9ImNhcmQiPg0KICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4NCiAgICAgIDxhIGNsYXNzPSJjYXJkLWxpbmsiIGRhdGEtdG9nZ2xlPSJjb2xsYXBzZSIgaHJlZj0iI2NvbGxhcHNlT25lMiIgc3R5bGU9ImZvbnQtc2l6ZToxMnB4OyI+DQogICAgICAgIEFjdGl2ZSBQYWNrYWdlDQogICAgICA8L2E+DQogICAgPC9kaXY+DQogICAgPGRpdiBpZD0iY29sbGFwc2VPbmUyIiBjbGFzcz0iY29sbGFwc2Ugc2hvdyIgZGF0YS1wYXJlbnQ9IiNhY2NvcmRpb24yIj4NCiAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+DQogICAgICAgIDxkaXYgaWQ9InNob3dQcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo2cHg7IGZvbnQtc3R5bGU6IG9ibGlxdWU7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDwhLS08ZGl2IGNsYXNzPSJwcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo3cHg7IiBpZD0icHJvZ3Jlc3NJRCI+LS0+DQogICAgICAgIA0KICAgICAgICAgICAgPCEtLTwvZGl2Pi0tPg0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICA8L2Rpdj4NCg0KICA8IS0tPGRpdiBjbGFzcz0iY2FyZCI+LS0+DQogIDwhLS0gIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4tLT4NCiAgPCEtLSAgICA8YSBjbGFzcz0iY29sbGFwc2VkIGNhcmQtbGluayIgZGF0YS10b2dnbGU9ImNvbGxhcHNlIiBocmVmPSIjY29sbGFwc2VUd28yIj4tLT4NCiAgPCEtLSAgICAgIEhhcnZlc3RlZC0tPg0KICA8IS0tICAgIDwvYT4tLT4NCiAgPCEtLSAgPC9kaXY+LS0+DQogIDwhLS0gIDxkaXYgaWQ9ImNvbGxhcHNlVHdvMiIgY2xhc3M9ImNvbGxhcHNlIiBkYXRhLXBhcmVudD0iI2FjY29yZGlvbjIiPi0tPg0KICA8IS0tICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+LS0+DQogIDwhLS0gICAgICBMb3JlbSBpcHN1bS4uLS0+DQogIDwhLS0gICAgPC9kaXY+LS0+DQogIDwhLS0gIDwvZGl2Pi0tPg0KICA8IS0tPC9kaXY+LS0+DQoNCiAgDQo8L2Rpdj4NCjwvZGl2Pg0KICAgIA0KPC9kaXY+DQoNCg0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KZnVuY3Rpb24gU3BvbnNvcnNoaXBQcm9ncmVzcygpew0KICAgICAgICAgICAgdmFyIGlkX3Nlc3Npb24gPSAnMSc7DQogICAgICAgICAgICB2YXIgZW1haWxfYWRkcmVzc19zZXNzaW9uID0gJ2xleGRlc2FpbnRAZ21haWwuY29tJzsNCi8vICAgICAgICBhbGVydChlbWFpbF9hZGRyZXNzX3Nlc3Npb24pICAgIDsgICAgDQogICAgICAgICAgICAkLmdldCgnLi9waHAuY29ubmVjdGlvbi9jb25uZWN0LnBocD9sb2FkPXJldHJpZXZlU3BvbnNvcnNoaXAnLHtpZF9zZXNzaW9uOmlkX3Nlc3Npb24sIGVtYWlsX2FkZHJlc3Nfc2Vzc2lvbjplbWFpbF9hZGRyZXNzX3Nlc3Npb259LCBmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzKXsNCiAgICAgICAgICAgICB2YXIgdGhlTW9udGhzID0gbmV3IEFycmF5KCJKYW4iLCAiRmViIiwgIk1hciIsICJBcHIiLCAiTWF5IiwgIkp1biIsICJKdWwiLCAiQXVnIiwgIlNlcCIsICJPY3QiLCAiTm92IiwgIkRlYyIpOw0KICAgICAgICAgICAgICAgIGlmKGRhdGEgIT09ICcnKXsNCi8vICAgICAgICAgICAgICAgIGFsZXJ0KGRhdGEpOw0KICAgICAgICAgICAgdmFyICBjb250YWN0ID0gSlNPTi5wYXJzZShkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsNCiAgICAgICAgLy8gUkVXQVJEICAgMTIsICBET1VCTEUgMjMsICBQUkVNSVVNIDM2DQogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb250YWN0Lmxlbmd0aDsgaSsrKXsNCi8vICAgICAgICAgICAgICAgICAgICBpZihteUlkRC50b1N0cmluZygpID09PSBjb250YWN0W2ldLmlkLnRvU3RyaW5nKCkpew0KDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgLy9kYXRlX3JlZ19wcm9kdWN0LCAgIGFtb3VudA0KICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbnVyZSA9IDAgOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtbyA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZXIgPSAxMDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5zdGF0dXMgPT09ICdhY3RpdmUnICYmIGNvbnRhY3RbaV0uaWQgPT09ICc5JyApew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2hvd1Byb2dyZXNzJykuYXBwZW5kKCc8bGFiZWwgY2xhc3M9InB1bGwtbGVmdCIgaWQ9ImhvdycraSsnIiA+Jytjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkrJzwvbGFiZWw+PGxhYmVsIGNsYXNzPSJwdWxsLXJpZ2h0IiBpZD0iQ293JytpKyciID48L2xhYmVsPjxicj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Nob3dQcm9ncmVzcycpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MiICBpZD0icHJvZ3Jlc3NJRCcraSsnIiAgc3R5bGU9ImZvbnQtc2l6ZToxMXB4OyI+PC9kaXY+PGJyPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUkVXQVJEJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdET1VCTEUnKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbnVyZSA9IDIzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtbyA9IDEzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdQUkVNSVVNJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAzNjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKSsnID09PT09ICAnK3RlbnVyZSsnICAgJytjb250YWN0W2ldLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRobHlfcmV0dXJuID0gcGFyc2VGbG9hdCggcGFyc2VGbG9hdChjb250YWN0W2ldLnJldHVybl9tb25leS50b1N0cmluZygpLnNwbGl0KCcsJylbMF0pLzIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IGNvbnRhY3RbaV0uZGF0ZV9yZWdfcHJvZHVjdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gMTI7Ly9wYXJzZUludChzdG9yZVByb2R1Y3Rbal0udG9TdHJpbmcoKS5zcGxpdCgnOjo6OicpWzVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gNzsvL3BhcnNlSW50KHBhcnNlRmxvYXQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs0XSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbW9udGhseV9yZXR1cm4gPSA0MDAwLzI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXQgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZFRoZSA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9udGhBcnJheXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpaiA9IDA7IGlqIDwgKHRlbnVyZSArIDEpOyBpaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaHlzaWNhbE1vbmV5ID0gcGFyc2VGbG9hdChjb250YWN0W2ldLmFtb3VudCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnQgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGlmKG5vdy5zcGxpdCgnLScpWzFdLmxlbmd0aCA9PT0gMSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnQgPSBwYXJzZUludCgnMCcrbm93LnNwbGl0KCctJylbMV0pIC0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udCA9IG5vdy5zcGxpdCgnLScpWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIChtb250ICsgaWopLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICBcDQogICAgdmFyIGRhdDsNCiAgICBpZighaXNWYWxpZERhdGUobm93LnNwbGl0KCctJylbMF0sIGZ1dHVyZS5nZXRNb250aCgpLCBmdXR1cmUuZ2V0RnVsbFllYXIoKSkpew0KICAgICAgICBhbGVydCgnc3Nzc3MnKTsNCiAgICAgICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShmdXR1cmUuZ2V0RnVsbFllYXIoKSwgZnV0dXJlLmdldE1vbnRoKCksIDApOw0KICAgICAgICBkYXQgPSAoKGxhc3REYXkuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSsiLyIrbGFzdERheS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgfWVsc2V7DQogICAgIGRhdCA9IChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KG5vdy5zcGxpdCgnLScpWzBdKycgICAnK3BhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSk7ICAvLy50b0ZpeGVkKDIpDQovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1dHVyZSA7DQovLyAgICAgICAgZnV0dXJlID0gbmV3IERhdGUobm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSwgcGFyc2VJbnQocGFyc2VJbnQobW9udCkgKyBwYXJzZUludChpaikpLCBub3cuc3BsaXQoJy0nKVswXSk7ICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICBpZighaXNWYWxpZERhdGUobm93LnNwbGl0KCctJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSkpew0KLy8vLy8vICAgICAgICAgICANCi8vICAgICAgICAgICB2YXIgbGFzdERheSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgMCk7DQovLy8vLy8gICAgICAgICAgICBmdXR1cmUgPSBuZXcgRGF0ZShmdXR1cmUuZ2V0RnVsbFllYXIoKSwgZnV0dXJlLmdldE1vbnRoKCksIGxhc3REYXkuZ2V0RGF0ZSgpKTsNCi8vLy8gICAgICAgICAgIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbGFzdERheS5nZXREYXRlKCkpOw0KLy8vLyAgICAgICAgICAgIG1vbnRoQXJyYXlzLnB1c2goRGF0ZS5wYXJzZSggICAgKSk7DQovLyAgICAgICAgICAgIGFsZXJ0KCdlZWUgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOw0KLy8gICAgICAgICAgICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8vLyAgICAgICAgICAgICAgYWxlcnQoJ2ZmZmYgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOyANCi8vICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc29sZS5sb2coZGF0KTsNCi8vICAgICAgIH1lbHNlew0KLy8gICAgICAgICAgIGFsZXJ0KCdkZGQnKTsNCi8vICAgICAgICAgICBmdXR1cmUgPSBuZXcgRGF0ZShub3cuc3BsaXQoJy0nKVsyXS5zcGxpdCgnICcpWzBdLCBwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSksIG5vdy5zcGxpdCgnLScpWzBdKTsNCi8vICAgICAgIH0NCi8vICAgIHZhciBjdXJyZW50X01vbnQgPSBuZXcgRGF0ZSgpOyAgICAgIA0KICAgIA0KLy8gICAgdmFyIGQ7IC8vID0gbmV3IERhdGUoZnV0dXJlLmdldEZ1bGxZZWFyKCksIChmdXR1cmUuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICBpZihkYXQgPT09ICcnKXsNCi8vICAgIGRhdCA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQovLyAgICBkID0gbmV3IERhdGUoZnV0dXJlLmdldEZ1bGxZZWFyKCksIChmdXR1cmUuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSApOw0KLy8gICAgfWVsc2V7DQovLyAgICAgICAgZGF0ID0gZGF0ZTEyOw0KLy8vLyAgICAgICAgZCA9IG5ldyBEYXRlKGZ1dHVyZS5nZXRGdWxsWWVhcigpLCAoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8gICAgICAgIA0KLy8vLyAgICAgICAgYWxlcnQoZGF0KydcbiBMRVhYWFhYJyk7DQovLyAgICB9DQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0Zyb20gaGVyZQ0KICAgIA0KICAgIA0KICAgIA0KICAgIA0KLy8gICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkYXRlMTIuZ2V0RnVsbFllYXIoKSwgZGF0ZTEyLmdldE1vbnRoKCkrMSwgMCk7DQovLyAgICB2YXIgZGF0ZTEyID0gbmV3IERhdGUoKGQuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7IC8vRGF0ZS5wYXJzZSggKGZ1dHVyZS5nZXRNb250aCgpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSkudG9TdHJpbmcoKSk7DQovLyAgICBpZihpc1ZhbGlkRGF0ZShub3cuc3BsaXQoJy0nKVswXSwgZC5nZXRNb250aCgpLCBkLmdldEZ1bGxZZWFyKCkpKXsgDQovLyAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2RhdC5nZXRGdWxsWWVhcigpKTsNCi8vLy8gICAgZC5zZXRNb250aChkYXRlMTIuZ2V0TW9udGgoKSApOw0KLy8gICAgfWVsc2V7DQovLyAgICAgICAgDQovLyAgICAgICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSwgMCk7DQovLyAgICAgICAgYWxlcnQoJ3NzXG4nKycgICcrbGFzdERheS5nZXREYXRlKCkrJyAgICAgJytsYXN0RGF5LmdldE1vbnRoKCkpOw0KLy8gICAgZGF0ZTEyID0gbmV3IERhdGUoKGQuZ2V0TW9udGgoKSApKyIvIitsYXN0RGF5LmdldERhdGUoKSsiLyIrZC5nZXRGdWxsWWVhcigpKTsgLy9EYXRlLnBhcnNlKCAoZnV0dXJlLmdldE1vbnRoKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpKTsgICAgICAgICANCi8vICAgIGFsZXJ0KCdzc1xuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXRlMTIuZ2V0TW9udGgoKSk7DQovLy8vICAgICBkID0gbmV3IERhdGUoZGF0ZTEyLmdldEZ1bGxZZWFyKCksIChkYXRlMTIuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLy8vICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSApOw0KLy8gICAgZCA9IG5ldyBEYXRlKGZ1dHVyZS5nZXRGdWxsWWVhcigpLCAoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8gICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgKTsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7DQovLyAgICAgICAgICAgICAgDQovLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRUaGUgPT09ICcnKXsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnc3d3dyAnKyhkLmdldE1vbnRoKCkgKzEpKTsNCi8vdmFyIGRhdGUxMiA9IG5ldyBEYXRlKChkYXQuZ2V0TW9udGgoKSArMSApKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZC5nZXRGdWxsWWVhcigpKTsgLy9EYXRlLnBhcnNlKCAoZnV0dXJlLmdldE1vbnRoKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpKTsgICAgICAgICANCi8vICAgIGFsZXJ0KCdzc1paWlxuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXQuZ2V0TW9udGgoKSk7DQovLy8vICAgIGRUaGUgPSBkYXRlMTIuZ2V0TW9udGgoKTsNCi8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZFRoZSAhPT0gZGF0ZTEyLmdldE1vbnRoKCkgJiYgZFRoZSAhPT0gJycpew0KLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ3N3d3cgJytkVGhlKycgIT09ICcrZGF0ZTEyLmdldE1vbnRoKCkpOw0KLy8vL3ZhciBkYXRlMTIgPSBuZXcgRGF0ZSgoZC5nZXRNb250aCgpICkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitkLmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOyAgICAgICAgIA0KLy8vLyAgICBhbGVydCgnc3NaQ0NDQ0NaWlxuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXRlMTIuZ2V0TW9udGgoKSk7DQovLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KLy8vLyAgICAgICAgIGFsZXJ0KCdzd3d3Jyk7DQovLy8vdmFyIGRhdGUxMiA9IG5ldyBEYXRlKChkLmdldE1vbnRoKCkgKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2QuZ2V0RnVsbFllYXIoKSk7IC8vRGF0ZS5wYXJzZSggKGZ1dHVyZS5nZXRNb250aCgpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSkudG9TdHJpbmcoKSk7ICAgICAgICAgDQovLy8vICAgIGFsZXJ0KCdzc1pXV1dXV1paXG4nKycgICcrZGF0ZTEyLmdldERhdGUoKSsnICAgICAnK2RhdGUxMi5nZXRNb250aCgpKTsNCi8vLy8gICAgICAgICAgICAgICAgICAgICAgICB9DQovLyAgICAgICAgICAgICAgICAgICAgfQ0KICAgICANCiAgICAgDQogICAgDQovLyAgICB0aWxsIGhlcmUNCiAgICANCi8vICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gICAgY29uc29sZS5sb2coZGF0LCAnIE5FWFIgJywgZGF0ZTEyKTsNCi8vICAgIGNvbnNvbGUubG9nKCdIZXJlICcsIGZ1dHVyZSk7DQogIA0KLy8gIGlmIChpaiA9PT0gKHRlbnVyZSAtIDEgKSApew0KLy8gICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZGF0ZTEyLmdldE1vbnRoKCldOw0KLy8gICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8gICAgIC8vDQovLyAgICAgDQovLyAgICAgaWYoIWlzVmFsaWREYXRlKGRhdGUxMi5nZXREYXRlKCksIGRhdGUxMi5nZXRNb250aCgpLCBkYXRlMTIuZ2V0RnVsbFllYXIoKSkpew0KLy8gICAgICAgICANCi8vICAgICB9DQovLyAgICAgaWYoZGF0ZUNoZWNrKGRhdCxkYXRlMTIsY3VycmVudF9Nb250KSl7DQovLy8vICAgIGFsZXJ0KCJBdmFpbGVkXG4iK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSsnXG4nK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSk7DQovL3RvdGFsID0gdG90YWwgKyAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICk7DQovLyAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KLy8gICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDonK2NhbCsnJSIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrICggKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApKS50b0ZpeGVkKDIpICAgICArICdcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIA0KLy8gICAgfWVsc2UgaWYoZGF0ZUNoZWNrQ3VycmVudChkYXQsZGF0ZTEyLGN1cnJlbnRfTW9udCkpew0KLy8gICAgYWxlcnQoIk5vdCBBdmFpbGVkIDIiKTsNCi8vICAgIHRvdGFsID0gdG90YWwgKyBwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKTsNCi8vICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy13YXJuaW5nIiBzdHlsZT0id2lkdGg6JytwZXIrJyUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBtb250aGx5X3JldHVybiArJ1xuXA0KLy8gICAgICAgIDwvZGl2PicpOw0KLy8gICAgfQ0KLy8gICAgIC8vDQovLyAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLyAgfWVsc2V7DQovLyAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tkYXRlMTIuZ2V0TW9udGgoKV07DQovLy8vICAgICAgdmFyIG1vblQgPSBmdXR1cmUuZ2V0TW9udGgoKSsxOw0KLy8gICAgICBpZihpaiA8PSAobWVtby0gMSkpew0KLy8gICAgICAgICAgDQovLyAgICAgICAgICBpZihkYXRlQ2hlY2soZGF0LGRhdGUxMixjdXJyZW50X01vbnQpKXsNCi8vLy8gICAgYWxlcnQoIkF2YWlsZWRcbiIrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKydcbicrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vLy8gICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkYXRlMTIuZ2V0RnVsbFllYXIoKSwgZGF0ZTEyLmdldE1vbnRoKCkrMSwgMCk7DQovLy8vICAgIGFsZXJ0KGxhc3REYXkuZ2V0RGF0ZSgpKycgICAgICcrbGFzdERheS5nZXRNb250aCgpKycgICcrZGF0ZTEyLmdldE1vbnRoKCkpOw0KLy8gICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KLy8gICAgdG90YWwgPSB0b3RhbCArICgoKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKTsNCi8vICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JytjYWwrJyUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyAoICgoKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKSkudG9GaXhlZCgyKSAgICAgKyAnXG5cDQovLyAgICAgICAgPC9kaXY+Jyk7DQovLyAgICB9ZWxzZSBpZihkYXRlQ2hlY2tDdXJyZW50KGRhdCxkYXRlMTIsY3VycmVudF9Nb250KSl7DQovLy8vICAgIGFsZXJ0KCJOb3QgQXZhaWxlZCAyIik7DQovLyAgICB0b3RhbCA9IHRvdGFsICsgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctd2FybmluZyIgc3R5bGU9IndpZHRoOicrcGVyKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgbW9udGhseV9yZXR1cm4gKydcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIH0NCi8vICAgICAgICAgIA0KLy8gICAgICAgICAgDQovLw0KLy8gICAgICAgICAgICAgICAgfWlmKGlqID4gKG1lbW8tIDEpKXsNCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLw0KLy9pZihkYXRlQ2hlY2soZGF0LGRhdGUxMixjdXJyZW50X01vbnQpKXsNCi8vLy8gICAgYWxlcnQoIkF2YWlsZWRcbiIrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKydcbicrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCi8vICAgIHRvdGFsID0gdG90YWwgKyAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICk7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOicrY2FsKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgKCAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkpLnRvRml4ZWQoMikgICAgICsgJ1xuXA0KLy8gICAgICAgIDwvZGl2PicpOw0KLy8gICAgfWVsc2UgaWYoZGF0ZUNoZWNrQ3VycmVudChkYXQsZGF0ZTEyLGN1cnJlbnRfTW9udCkpew0KLy8vLyAgICBhbGVydCgiTm90IEF2YWlsZWQgMiIpOw0KLy90b3RhbCA9IHRvdGFsICsgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctd2FybmluZyIgc3R5bGU9IndpZHRoOicrcGVyKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgbW9udGhseV9yZXR1cm4gKydcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIH0NCi8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8gICAgICAgICAgICAgICAgfQ0KLy8gICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI0NvdycraSkudGV4dCgnVG90YWwgOiAnK3RvdGFsLnRvRml4ZWQoMikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL3ByaW1hcnkgICBzdWNjZXNzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICANCi8vICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAkKCcjbG9hZGVyJykuaGlkZSgpOw0KICANCiAgICB9','hello.txt');
    var vvv = 'data:text/plain;base64,PHNjcmlwdD4NCiAgICAgZnVuY3Rpb24gZGF5X3MoZGF0ZTEsIGRhdGUyKXsNCi8vICAgICAgICAgIGFsZXJ0KGRhdGUyKTsNCiAgICAgICAgICAvLyBUbyBjYWxjdWxhdGUgdGhlIHRpbWUgZGlmZmVyZW5jZSBvZiB0d28gZGF0ZXMgDQp2YXIgRGlmZmVyZW5jZV9Jbl9UaW1lID0gZGF0ZTIuZ2V0VGltZSgpIC0gZGF0ZTEuZ2V0VGltZSgpOyANCiAgDQovLyBUbyBjYWxjdWxhdGUgdGhlIG5vLiBvZiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIA0KdmFyIERpZmZlcmVuY2VfSW5fRGF5cyA9IERpZmZlcmVuY2VfSW5fVGltZSAvICgxMDAwICogMzYwMCAqIDI0KTsNCiAgICANCiAgICByZXR1cm4gRGlmZmVyZW5jZV9Jbl9EYXlzOw0KDQogICAgICB9IA0KICBmdW5jdGlvbiBpc0RhdGVHcmVhdGVyVGhhblRvZGF5KGIpew0KICAgICAgdmFyIGRTID0gYi5zcGxpdCgiLyIpOw0KICAgICAgdmFyIGQxID0gbmV3IERhdGUoZFNbMV0sICgrZFNbMF0gLSAxKSk7DQogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgaWYoZDEgPiB0b2RheSl7DQogICAgICAgICAgcmV0dXJuICdOJzsNCiAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiAnWSc7DQogICAgICB9DQogIH0NCiAgDQogIGZ1bmN0aW9uIFNwb25zb3JzaGlwUHJvZ3Jlc3MoKXsNCiAgICAgICAgICAgIHZhciBpZF9zZXNzaW9uID0gJCgnI2lkX3Nlc3Npb24nKS52YWwoKTsNCiAgICAgICAgICAgIHZhciBlbWFpbF9hZGRyZXNzX3Nlc3Npb24gPSAkKCcjZW1haWxfYWRkcmVzc19zZXNzaW9uJykudmFsKCk7DQovLyAgICAgICAgYWxlcnQoZW1haWxfYWRkcmVzc19zZXNzaW9uKSAgICA7ICAgIA0KICAgICAgICAgICAgJC5nZXQoJy4uL3BocC5jb25uZWN0aW9uL2Nvbm5lY3QucGhwP2xvYWQ9cmV0cmlldmVTcG9uc29yc2hpcCcse2lkX3Nlc3Npb246aWRfc2Vzc2lvbiwgZW1haWxfYWRkcmVzc19zZXNzaW9uOmVtYWlsX2FkZHJlc3Nfc2Vzc2lvbn0sIGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMpew0KICAgICAgICAgICAgIHZhciB0aGVNb250aHMgPSBuZXcgQXJyYXkoIkphbiIsICJGZWIiLCAiTWFyIiwgIkFwciIsICJNYXkiLCAiSnVuIiwgIkp1bCIsICJBdWciLCAiU2VwIiwgIk9jdCIsICJOb3YiLCAiRGVjIik7DQogICAgICAgICAgICAgICAgaWYoZGF0YSAhPT0gJycpew0KICAgICAgICAgICAgICAgICAgICB2YXIgIGNvbnRhY3QgPSBKU09OLnBhcnNlKGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IDA7DQogICAgICAgIC8vIFJFV0FSRCAgIDEyLCAgRE9VQkxFIDIzLCAgUFJFTUlVTSAzNg0KICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY29udGFjdC5sZW5ndGg7IGkrKyl7DQovLyAgICAgICAgICAgICAgICAgICAgaWYobXlJZEQudG9TdHJpbmcoKSA9PT0gY29udGFjdFtpXS5pZC50b1N0cmluZygpKXsNCg0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIC8vZGF0ZV9yZWdfcHJvZHVjdCwgICBhbW91bnQNCiAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW51cmUgPSAwIDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW8gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRhY3RbaV0uc3RhdHVzID09PSAnYWN0aXZlJyAmJiBpID09PSAwKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA9PT0gJ1JFV0FSRCcpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVudXJlID0gMTI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vID0gNzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnRE9VQkxFJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAyMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUFJFTUlVTScpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVudXJlID0gMzY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vID0gMTM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KGNvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkrJyA9PT09PSAgJyt0ZW51cmUrJyAgICcrY29udGFjdFtpXS5pZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb250aGx5X3JldHVybiA9IHBhcnNlRmxvYXQoIHBhcnNlRmxvYXQoY29udGFjdFtpXS5yZXR1cm5fbW9uZXkudG9TdHJpbmcoKS5zcGxpdCgnLCcpWzBdKS8yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3cgPSBjb250YWN0W2ldLmRhdGVfcmVnX3Byb2R1Y3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICA9IDEyOy8vcGFyc2VJbnQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs1XSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICA9IDc7Ly9wYXJzZUludChwYXJzZUZsb2F0KHN0b3JlUHJvZHVjdFtqXS50b1N0cmluZygpLnNwbGl0KCc6Ojo6JylbNF0pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG1vbnRobHlfcmV0dXJuID0gNDAwMC8yOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGh5c2ljYWxNb25leSA9IGNvbnRhY3RbaV0uYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlqID0gMDsgaWogPCB0ZW51cmU7IGlqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnQgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5vdy5zcGxpdCgnLScpWzFdLmxlbmd0aCA9PT0gMSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnQgPSBwYXJzZUludCgnMCcrbm93LnNwbGl0KCctJylbMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250ID0gbm93LnNwbGl0KCctJylbMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQobW9udCsnICAgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOw0KICB2YXIgZnV0dXJlID0gbmV3IERhdGUobm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSwgKG1vbnQgKyBpaiksIG5vdy5zcGxpdCgnLScpWzBdKTsNCiAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICAgDQogICAgdmFyIGRhdCA9IChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgYWxlcnQoZGF0KQ0KLy8gICAgIHZhciBkYXRlMTIgPSBuZXcgRGF0ZSgiMDcvMjgvMjAyMCIpOyANCi8vICAgICB2YXIgZGF0ZTIyID0gbmV3IERhdGUoIjA4LzI4LzIwMjAiKTsNCi8vIC8vYWxlcnQoY3VycmVudF9Nb250LmdldE1vbnRoKCkrIi8iK2N1cnJlbnRfTW9udC5nZXREYXRlKCkrIi8iK2N1cnJlbnRfTW9udC5nZXRGdWxsWWVhcigpKQ0KLy8gICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gLy8gICAgYWxlcnQoZGF5X3MoZGF0ZTEsIGN1cnJlbnRfZGF0ZSkrJyAgICcrY3VycmVudF9Nb250LmdldE1vbnRoKCkpOw0KLy8gICBpZiAoaWogPT09ICh0ZW51cmUgLSAxKSApew0KLy8gICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXQpID09PSAnWScpew0KICAgICAgDQovLyAgICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZnV0dXJlLmdldE1vbnRoKCldOw0KLy8gLy8gICAgICAgIHZhciB5ZWFyID0gZnV0dXJlLmdldEZ1bGxZZWFyKCk7DQovLyAgICAgICAkKCcjcHJvZ3Jlc3NJRCcpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolIiBpZD0iJyttb250aCsnIiA+Jyttb250aCsnICcrICByb3VuZFVwKCggKCgobW9udGhseV9yZXR1cm4vZGF5X3MoZGF0ZTEyLCBkYXRlMjIpKSAqIGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSkgK3BoeXNpY2FsTW9uZXkgICkpLCAyKSAgICAgKyclXG5cDQovLyAgICAgICAgIDwvZGl2PicpOw0KLy8gICAgICAgICAgICAgfQ0KLy8gICB9ZWxzZXsNCi8vICAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tmdXR1cmUuZ2V0TW9udGgoKV07DQovLyAgICAgICBpZihpaiA8IChtZW1vLSAxKSAmJiBmdXR1cmUuZ2V0TW9udGgoKSA8PSBjdXJyZW50X01vbnQuZ2V0TW9udGgoKSl7DQogICAgICANCi8vICAgICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXQpID09PSAnWScpew0KLy8gICAgICAgICAgICAgLy8gYWxlcnQocGFyc2VGbG9hdChtb250aGx5X3JldHVybikrJyAvICcrcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGRhdGUyMikpKydcbiAgICcrcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vICAgICAgICQoJyNwcm9ncmVzc0lEJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyByb3VuZFVwKCggKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGRhdGUyMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKSkgICApKSwgMikgICAgICsgJyVcblwNCi8vICAgICAgICAgPC9kaXY+Jyk7DQovLyAgICAgICAgICAgICAgICAgfQ0KLy8gICAgICAgICAgICAgICAgIH1pZihpaiA+IChtZW1vLSAxKSl7DQovLyAgICAgICAgICAgICAgICAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0KSA9PT0gJ1knKXsgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICQoJyNwcm9ncmVzc0lEJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyAoICgoKG1vbnRobHlfcmV0dXJuL2RheV9zKGRhdGUxMiwgZGF0ZTIyKSkgKiBkYXlfcyhkYXRlMTIsIGN1cnJlbnRfZGF0ZSkpICsgcGh5c2ljYWxNb25leSAgKSkgICAgICsgJyVcblwNCi8vICAgICAgICAgPC9kaXY+Jyk7ICAgIA0KLy8gICAgICAgICAgICAgICAgIH0NCi8vICAgICAgICAgICAgICAgICB9DQovLyAgICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH1lbHNlew0KLy8gICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KLy8gICAgICAgICAgICAkKCcjbG9hZGVyJykuaGlkZSgpOw0KICANCiAgICB9DQogICAgDQogZnVuY3Rpb24gcm91bmRVcChudW0sIHByZWNpc2lvbikgew0KIHByZWNpc2lvbiA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pOw0KIHJldHVybiBNYXRoLmNlaWwobnVtICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjsNCn0gICANCiAgICANCiAgICANCiAgU3BvbnNvcnNoaXBQcm9ncmVzcygpOw0KPC9zY3JpcHQ+DQoNCjxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHgiPg0KIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+ICAgDQo8ZGl2IGlkPSJhY2NvcmRpb24yIj4NCg0KICA8ZGl2IGNsYXNzPSJjYXJkIj4NCiAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+DQogICAgICA8YSBjbGFzcz0iY2FyZC1saW5rIiBkYXRhLXRvZ2dsZT0iY29sbGFwc2UiIGhyZWY9IiNjb2xsYXBzZU9uZTIiPg0KICAgICAgICBBY3RpdmUgDQogICAgICA8L2E+DQogICAgPC9kaXY+DQogICAgPGRpdiBpZD0iY29sbGFwc2VPbmUyIiBjbGFzcz0iY29sbGFwc2Ugc2hvdyIgZGF0YS1wYXJlbnQ9IiNhY2NvcmRpb24yIj4NCiAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+DQogICAgICAgIDxkaXYgaWQ9InNob3dQcm9ncmVzcyI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo3cHg7IiBpZD0icHJvZ3Jlc3NJRCI+DQogICAgICAgIA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogIDwvZGl2Pg0KDQogIDwhLS08ZGl2IGNsYXNzPSJjYXJkIj4tLT4NCiAgPCEtLSAgPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPi0tPg0KICA8IS0tICAgIDxhIGNsYXNzPSJjb2xsYXBzZWQgY2FyZC1saW5rIiBkYXRhLXRvZ2dsZT0iY29sbGFwc2UiIGhyZWY9IiNjb2xsYXBzZVR3bzIiPi0tPg0KICA8IS0tICAgICAgSGFydmVzdGVkLS0+DQogIDwhLS0gICAgPC9hPi0tPg0KICA8IS0tICA8L2Rpdj4tLT4NCiAgPCEtLSAgPGRpdiBpZD0iY29sbGFwc2VUd28yIiBjbGFzcz0iY29sbGFwc2UiIGRhdGEtcGFyZW50PSIjYWNjb3JkaW9uMiI+LS0+DQogIDwhLS0gICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4tLT4NCiAgPCEtLSAgICAgIExvcmVtIGlwc3VtLi4tLT4NCiAgPCEtLSAgICA8L2Rpdj4tLT4NCiAgPCEtLSAgPC9kaXY+LS0+DQogIDwhLS08L2Rpdj4tLT4NCg0KICANCjwvZGl2Pg0KPC9kaXY+DQogICAgDQo8L2Rpdj4NCg0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KPHNjcmlwdD4NCiAgICAgZnVuY3Rpb24gZGF5X3MoZGF0ZTEsIGRhdGUyKXsNCi8vICAgICAgICAgIGFsZXJ0KGRhdGUyKTsNCiAgICAgICAgICAvLyBUbyBjYWxjdWxhdGUgdGhlIHRpbWUgZGlmZmVyZW5jZSBvZiB0d28gZGF0ZXMgDQp2YXIgRGlmZmVyZW5jZV9Jbl9UaW1lID0gZGF0ZTIuZ2V0VGltZSgpIC0gZGF0ZTEuZ2V0VGltZSgpOyANCiAgDQovLyBUbyBjYWxjdWxhdGUgdGhlIG5vLiBvZiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIA0KdmFyIERpZmZlcmVuY2VfSW5fRGF5cyA9IERpZmZlcmVuY2VfSW5fVGltZSAvICgxMDAwICogMzYwMCAqIDI0KTsNCiAgICANCiAgICByZXR1cm4gRGlmZmVyZW5jZV9Jbl9EYXlzOw0KDQogICAgICB9IA0KICBmdW5jdGlvbiBpc0RhdGVHcmVhdGVyVGhhblRvZGF5KGIpew0KICAgICAgdmFyIGRTID0gYi5zcGxpdCgiLyIpOw0KICAgICAgdmFyIGQxID0gbmV3IERhdGUoZFNbMV0sICgrZFNbMF0gLSAxKSk7DQogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgaWYoZDEgPiB0b2RheSl7DQogICAgICAgICAgcmV0dXJuICdOJzsNCiAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiAnWSc7DQogICAgICB9DQogIH0NCiAgDQogIHZhciBEYXRlRGlmZiA9IHsNCg0KICAgIGluRGF5czogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciB0MiA9IGQyLmdldFRpbWUoKTsNCiAgICAgICAgdmFyIHQxID0gZDEuZ2V0VGltZSgpOw0KDQogICAgICAgIHJldHVybiBwYXJzZUludCgodDItdDEpLygyNCozNjAwKjEwMDApKTsNCiAgICB9LA0KDQogICAgaW5XZWVrczogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciB0MiA9IGQyLmdldFRpbWUoKTsNCiAgICAgICAgdmFyIHQxID0gZDEuZ2V0VGltZSgpOw0KDQogICAgICAgIHJldHVybiBwYXJzZUludCgodDItdDEpLygyNCozNjAwKjEwMDAqNykpOw0KICAgIH0sDQoNCiAgICBpbk1vbnRoczogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciBkMVkgPSBkMS5nZXRGdWxsWWVhcigpOw0KICAgICAgICB2YXIgZDJZID0gZDIuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgdmFyIGQxTSA9IGQxLmdldE1vbnRoKCk7DQogICAgICAgIHZhciBkMk0gPSBkMi5nZXRNb250aCgpOw0KDQogICAgICAgIHJldHVybiAoZDJNKzEyKmQyWSktKGQxTSsxMipkMVkpOw0KICAgIH0sDQoNCiAgICBpblllYXJzOiBmdW5jdGlvbihkMSwgZDIpIHsNCiAgICAgICAgcmV0dXJuIGQyLmdldEZ1bGxZZWFyKCktZDEuZ2V0RnVsbFllYXIoKTsNCiAgICB9DQp9DQoNCiAgZnVuY3Rpb24gU3BvbnNvcnNoaXBQcm9ncmVzcygpew0KICAgICAgICAgICAgdmFyIGlkX3Nlc3Npb24gPSAkKCcjaWRfc2Vzc2lvbicpLnZhbCgpOw0KICAgICAgICAgICAgdmFyIGVtYWlsX2FkZHJlc3Nfc2Vzc2lvbiA9ICQoJyNlbWFpbF9hZGRyZXNzX3Nlc3Npb24nKS52YWwoKTsNCi8vICAgICAgICBhbGVydChlbWFpbF9hZGRyZXNzX3Nlc3Npb24pICAgIDsgICAgDQogICAgICAgICAgICAkLmdldCgnLi4vcGhwLmNvbm5lY3Rpb24vY29ubmVjdC5waHA/bG9hZD1yZXRyaWV2ZVNwb25zb3JzaGlwJyx7aWRfc2Vzc2lvbjppZF9zZXNzaW9uLCBlbWFpbF9hZGRyZXNzX3Nlc3Npb246ZW1haWxfYWRkcmVzc19zZXNzaW9ufSwgZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cyl7DQogICAgICAgICAgICAgdmFyIHRoZU1vbnRocyA9IG5ldyBBcnJheSgiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLCAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiKTsNCiAgICAgICAgICAgICAgICBpZihkYXRhICE9PSAnJyl7DQogICAgICAgICAgICAgICAgICAgIHZhciAgY29udGFjdCA9IEpTT04ucGFyc2UoZGF0YSk7DQogICAgICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsNCiAgICAgICAgLy8gUkVXQVJEICAgMTIsICBET1VCTEUgMjMsICBQUkVNSVVNIDM2DQogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb250YWN0Lmxlbmd0aDsgaSsrKXsNCi8vICAgICAgICAgICAgICAgICAgICBpZihteUlkRC50b1N0cmluZygpID09PSBjb250YWN0W2ldLmlkLnRvU3RyaW5nKCkpew0KDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgLy9kYXRlX3JlZ19wcm9kdWN0LCAgIGFtb3VudA0KICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbnVyZSA9IDAgOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtbyA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZXIgPSAxMDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5zdGF0dXMgPT09ICdhY3RpdmUnICl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG93UHJvZ3Jlc3MnKS5hcHBlbmQoJzxsYWJlbCBpZD0iaG93JytpKyciID4nK2NvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSsnPC9sYWJlbD48YnI+Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG93UHJvZ3Jlc3MnKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzIiAgaWQ9InByb2dyZXNzSUQnK2krJyIgIHN0eWxlPSJmb250LXNpemU6NnB4OyI+PC9kaXY+PGJyPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUkVXQVJEJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdET1VCTEUnKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbnVyZSA9IDIzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtbyA9IDEzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdQUkVNSVVNJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAzNjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKSsnID09PT09ICAnK3RlbnVyZSsnICAgJytjb250YWN0W2ldLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRobHlfcmV0dXJuID0gcGFyc2VGbG9hdCggcGFyc2VGbG9hdChjb250YWN0W2ldLnJldHVybl9tb25leS50b1N0cmluZygpLnNwbGl0KCcsJylbMF0pLzIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IGNvbnRhY3RbaV0uZGF0ZV9yZWdfcHJvZHVjdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gMTI7Ly9wYXJzZUludChzdG9yZVByb2R1Y3Rbal0udG9TdHJpbmcoKS5zcGxpdCgnOjo6OicpWzVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gNzsvL3BhcnNlSW50KHBhcnNlRmxvYXQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs0XSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbW9udGhseV9yZXR1cm4gPSA0MDAwLzI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlqID0gMDsgaWogPCB0ZW51cmU7IGlqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBoeXNpY2FsTW9uZXkgPSBwYXJzZUZsb2F0KGNvbnRhY3RbaV0uYW1vdW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9udCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaWYobm93LnNwbGl0KCctJylbMV0ubGVuZ3RoID09PSAxKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udCA9IHBhcnNlSW50KCcwJytub3cuc3BsaXQoJy0nKVsxXSkgLSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBtb250ID0gbm93LnNwbGl0KCctJylbMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBhbGVydChtb250KycgICAnK3BhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSk7ICAvLy50b0ZpeGVkKDIpDQogIHZhciBmdXR1cmUgPSBuZXcgRGF0ZShub3cuc3BsaXQoJy0nKVsyXS5zcGxpdCgnICcpWzBdLCBwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSksIG5vdy5zcGxpdCgnLScpWzBdKTsNCiAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICAgDQogICAgdmFyIGRhdENhbGwgPSAoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpOw0KICAgIHZhciBkYXQgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgIC8vIGFsZXJ0KGRhdENhbGwpOw0KICAgIHZhciBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAyKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KICAgIA0KICAgIC8vIGFsZXJ0KGRhdGUxMik7DQogICAgDQogICAgLy8gYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKTsNCiAgICAvLyB2YXIgZGF0ZTIyID0gbmV3IERhdGUoIjA4LzI4LzIwMjAiKTsNCi8vYWxlcnQoY3VycmVudF9Nb250LmdldE1vbnRoKCkrIi8iK2N1cnJlbnRfTW9udC5nZXREYXRlKCkrIi8iK2N1cnJlbnRfTW9udC5nZXRGdWxsWWVhcigpKQ0KICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gLy8gICAgYWxlcnQoZGF5X3MoZGF0ZTEsIGN1cnJlbnRfZGF0ZSkrJyAgICcrY3VycmVudF9Nb250LmdldE1vbnRoKCkpOw0KLy8gYWxlcnQoZGF0KydcbicrZGF0ZTEyKydcbicrZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKTsNCiAgaWYgKGlqID09PSAodGVudXJlIC0gMSkgKXsNCiAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0Q2FsbCkgPT09ICdZJyl7DQogICAgICANCiAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tmdXR1cmUuZ2V0TW9udGgoKV07DQovLyAgICAgICAgdmFyIHllYXIgPSBmdXR1cmUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYobW9udGhfID49IDEpew0KICAgICAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctcHJpbWFyeSIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICAgKyAnXG5cDQogICAgICAgIDwvZGl2PicpOyAgICAgICAgICANCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKSkpLnRvRml4ZWQoMik7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1zdWNjZXNzIiBzdHlsZT0id2lkdGg6JScrY2FsKyciIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICAgICArICclXG5cDQogICAgICAgIDwvZGl2PicpOw0KICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgfWVsc2V7DQogICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZnV0dXJlLmdldE1vbnRoKCldOw0KICAgICAgdmFyIG1vblQgPSBmdXR1cmUuZ2V0TW9udGgoKSsxOw0KICAgICAgaWYoaWogPCAobWVtby0gMSkgJiYgZnV0dXJlLmdldE1vbnRoKCkgPD0gY3VycmVudF9Nb250LmdldE1vbnRoKCkpew0KICAgICAgDQogICAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0Q2FsbCkgPT09ICdZJyl7DQogICAgICAgICAgICAvLyBhbGVydChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKSsnIC8gJytwYXJzZUZsb2F0KGRheV9zKGRhdGUxMiwgZGF0ZTIyKSkrJ1xuICAgJytwYXJzZUZsb2F0KGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSkpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoZHkgPj0gZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKXsNCiAgICAgICAgICAgICAgICBhbGVydChjb250YWN0W2ldLmlkKydcbicrZGF0KydcbicrY3VycmVudF9kYXRlKydcbicrZHkrJ1xuJytkYXRlMTIgKydcbicrIGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSArJ1xuJysgZGF5X3MoZGF0LCBkYXRlMTIpKTsNCiAgICAgICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKSApOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXdhcm5pbmciIHN0eWxlPSJ3aWR0aDolMTAwOyBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjNDkxMjE3OyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrIHBoeXNpY2FsTW9uZXkgICArICdcblwNCiAgICAgICAgPC9kaXY+Jyk7ICAgICAgICAgIA0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYocGFyc2VJbnQoY3VycmVudF9kYXRlLmdldERhdGUoKSkgPCBwYXJzZUludChub3cuc3BsaXQoJy0nKVswXSkpew0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVC0xICsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgLy8gIGFsZXJ0KGRheV9zKGRhdCwgZGF0ZTEyKSsnXG4nK2RheV9zKGRhdCwgY3VycmVudF9kYXRlKSsnXG4nK2RhdCsnXG4nK2RhdGUxMik7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCAoIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkudG9GaXhlZCgyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JScrY2FsKyc7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJytwaHlzaWNhbE1vbmV5KyAnXG5cDQogICAgICAgIDwvZGl2PicpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICBpZihwYXJzZUludChjdXJyZW50X2RhdGUuZ2V0TW9udGgoKSkgPT09IHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSl7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBkYXQgPSBuZXcgRGF0ZShtb25UICsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDIpKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgLy8gIGFsZXJ0KGRheV9zKGRhdCwgZGF0ZTEyKSsnXG4nK2RheV9zKGRhdCwgY3VycmVudF9kYXRlKSsnXG4nK2RhdCsnXG4nK2RhdGUxMik7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCAoIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkudG9GaXhlZCgyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JScrY2FsKyc7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgcGh5c2ljYWxNb25leSArICdcblwNCiAgICAgICAgPC9kaXY+Jyk7ICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgIA0KICAgICAgICANCiAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAvLyAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgIC8vICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgLy8gICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAvLyAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAocGh5c2ljYWxNb25leSArICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgIC8vICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgIC8vICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolJytjYWwrJyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnIFZWICcrZGF0KycgICcrKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkrJyAgJytwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkgICArICdcblwNCiAgICAvLyAgICAgPC9kaXY+Jyk7DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfWlmKGlqID4gKG1lbW8tIDEpKXsNCiAgICAgICAgICAgICAgICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXRDYWxsKSA9PT0gJ1knKXsgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYobW9udGhfID49IDEpew0KICAgICAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAgKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pICk7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctcHJpbWFyeSIgc3R5bGU9IndpZHRoOiUxMDA7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgcGh5c2ljYWxNb25leSAgICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgICAgICAgICAgDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZihwYXJzZUludChjdXJyZW50X2RhdGUuZ2V0RGF0ZSgpKSA8IHBhcnNlSW50KG5vdy5zcGxpdCgnLScpWzBdKSl7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBkYXQgPSBuZXcgRGF0ZShtb25ULTEgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXN1Y2Nlc3MiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnK3BoeXNpY2FsTW9uZXkrICdcblwNCiAgICAgICAgPC9kaXY+Jyk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgIGlmKHBhcnNlSW50KGN1cnJlbnRfZGF0ZS5nZXRNb250aCgpKSA9PT0gcGFyc2VJbnQocGFyc2VJbnQobW9udCkgKyBwYXJzZUludChpaikpKXsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMikrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXN1Y2Nlc3MiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVCArIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIC8vICBhbGVydChkYXlfcyhkYXQsIGRhdGUxMikrJ1xuJytkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkrJ1xuJytkYXQrJ1xuJytkYXRlMTIpOw0KICAgICAgICAgICAgcGh5c2ljYWxNb25leSA9ICggKCAocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApLnRvRml4ZWQoMik7DQogICAgICAgICAgICB2YXIgY2FsID0gKHBhcnNlRmxvYXQocGFyc2VGbG9hdChwZXIpL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpLnRvRml4ZWQoMik7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctc3VjY2VzcyIgc3R5bGU9IndpZHRoOiUnK2NhbCsnOyBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjNDkxMjE3OyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrIHBoeXNpY2FsTW9uZXkgKyAnXG5cDQogICAgICAgIDwvZGl2PicpOyAgDQogICAgICAgIA0KICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgIC8vICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVCArIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgLy8gICAgICAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAvLyAgICAgICAgIC8vICBhbGVydChkYXlfcyhkYXQsIGRhdGUxMikrJ1xuJytkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkrJ1xuJytkYXQrJ1xuJytkYXRlMTIpOw0KICAgIC8vICAgICAgICAgcGh5c2ljYWxNb25leSA9IChwaHlzaWNhbE1vbmV5ICsgKCAocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApLnRvRml4ZWQoMik7DQogICAgLy8gICAgICAgICB2YXIgY2FsID0gKHBhcnNlRmxvYXQocGFyc2VGbG9hdChwZXIpL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpLnRvRml4ZWQoMik7DQogICAgLy8gICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUnK2NhbCsnIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgVlYgJytkYXQrJyAgJysocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSsnICAnK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSAgICsgJ1xuXA0KICAgIC8vICAgICA8L2Rpdj4nKTsNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9wcmltYXJ5ICAgc3VjY2Vzcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfWVsc2V7DQovLyAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQovLyAgICAgICAgICAgICQoJyNsb2FkZXInKS5oaWRlKCk7DQogIA0KICAgIH0NCiAgICANCiBmdW5jdGlvbiByb3VuZFVwKG51bSwgcHJlY2lzaW9uKSB7DQogcHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7DQogcmV0dXJuIE1hdGguY2VpbChudW0gKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uOw0KfSAgIA0KICAgIA0KICAgIA0KICBTcG9uc29yc2hpcFByb2dyZXNzKCk7DQo8L3NjcmlwdD4NCg0KPGRpdiBjbGFzcz0icm93IiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweCI+DQogPGRpdiBjbGFzcz0iY29udGFpbmVyIj4gICANCjxkaXYgaWQ9ImFjY29yZGlvbjIiPg0KDQogIDxkaXYgY2xhc3M9ImNhcmQiPg0KICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4NCiAgICAgIDxhIGNsYXNzPSJjYXJkLWxpbmsiIGRhdGEtdG9nZ2xlPSJjb2xsYXBzZSIgaHJlZj0iI2NvbGxhcHNlT25lMiIgc3R5bGU9ImZvbnQtc2l6ZToxMnB4OyI+DQogICAgICAgIEFjdGl2ZSBQYWNrYWdlDQogICAgICA8L2E+DQogICAgPC9kaXY+DQogICAgPGRpdiBpZD0iY29sbGFwc2VPbmUyIiBjbGFzcz0iY29sbGFwc2Ugc2hvdyIgZGF0YS1wYXJlbnQ9IiNhY2NvcmRpb24yIj4NCiAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+DQogICAgICAgIDxkaXYgaWQ9InNob3dQcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo2cHg7IGZvbnQtc3R5bGU6IG9ibGlxdWU7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDwhLS08ZGl2IGNsYXNzPSJwcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo3cHg7IiBpZD0icHJvZ3Jlc3NJRCI+LS0+DQogICAgICAgIA0KICAgICAgICAgICAgPCEtLTwvZGl2Pi0tPg0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICA8L2Rpdj4NCg0KICA8IS0tPGRpdiBjbGFzcz0iY2FyZCI+LS0+DQogIDwhLS0gIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4tLT4NCiAgPCEtLSAgICA8YSBjbGFzcz0iY29sbGFwc2VkIGNhcmQtbGluayIgZGF0YS10b2dnbGU9ImNvbGxhcHNlIiBocmVmPSIjY29sbGFwc2VUd28yIj4tLT4NCiAgPCEtLSAgICAgIEhhcnZlc3RlZC0tPg0KICA8IS0tICAgIDwvYT4tLT4NCiAgPCEtLSAgPC9kaXY+LS0+DQogIDwhLS0gIDxkaXYgaWQ9ImNvbGxhcHNlVHdvMiIgY2xhc3M9ImNvbGxhcHNlIiBkYXRhLXBhcmVudD0iI2FjY29yZGlvbjIiPi0tPg0KICA8IS0tICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+LS0+DQogIDwhLS0gICAgICBMb3JlbSBpcHN1bS4uLS0+DQogIDwhLS0gICAgPC9kaXY+LS0+DQogIDwhLS0gIDwvZGl2Pi0tPg0KICA8IS0tPC9kaXY+LS0+DQoNCiAgDQo8L2Rpdj4NCjwvZGl2Pg0KICAgIA0KPC9kaXY+DQoNCg0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KZnVuY3Rpb24gU3BvbnNvcnNoaXBQcm9ncmVzcygpew0KICAgICAgICAgICAgdmFyIGlkX3Nlc3Npb24gPSAnMSc7DQogICAgICAgICAgICB2YXIgZW1haWxfYWRkcmVzc19zZXNzaW9uID0gJ2xleGRlc2FpbnRAZ21haWwuY29tJzsNCi8vICAgICAgICBhbGVydChlbWFpbF9hZGRyZXNzX3Nlc3Npb24pICAgIDsgICAgDQogICAgICAgICAgICAkLmdldCgnLi9waHAuY29ubmVjdGlvbi9jb25uZWN0LnBocD9sb2FkPXJldHJpZXZlU3BvbnNvcnNoaXAnLHtpZF9zZXNzaW9uOmlkX3Nlc3Npb24sIGVtYWlsX2FkZHJlc3Nfc2Vzc2lvbjplbWFpbF9hZGRyZXNzX3Nlc3Npb259LCBmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzKXsNCiAgICAgICAgICAgICB2YXIgdGhlTW9udGhzID0gbmV3IEFycmF5KCJKYW4iLCAiRmViIiwgIk1hciIsICJBcHIiLCAiTWF5IiwgIkp1biIsICJKdWwiLCAiQXVnIiwgIlNlcCIsICJPY3QiLCAiTm92IiwgIkRlYyIpOw0KICAgICAgICAgICAgICAgIGlmKGRhdGEgIT09ICcnKXsNCi8vICAgICAgICAgICAgICAgIGFsZXJ0KGRhdGEpOw0KICAgICAgICAgICAgdmFyICBjb250YWN0ID0gSlNPTi5wYXJzZShkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsNCiAgICAgICAgLy8gUkVXQVJEICAgMTIsICBET1VCTEUgMjMsICBQUkVNSVVNIDM2DQogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb250YWN0Lmxlbmd0aDsgaSsrKXsNCi8vICAgICAgICAgICAgICAgICAgICBpZihteUlkRC50b1N0cmluZygpID09PSBjb250YWN0W2ldLmlkLnRvU3RyaW5nKCkpew0KDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgLy9kYXRlX3JlZ19wcm9kdWN0LCAgIGFtb3VudA0KICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbnVyZSA9IDAgOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtbyA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZXIgPSAxMDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5zdGF0dXMgPT09ICdhY3RpdmUnICYmIGNvbnRhY3RbaV0uaWQgPT09ICc5JyApew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2hvd1Byb2dyZXNzJykuYXBwZW5kKCc8bGFiZWwgY2xhc3M9InB1bGwtbGVmdCIgaWQ9ImhvdycraSsnIiA+Jytjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkrJzwvbGFiZWw+PGxhYmVsIGNsYXNzPSJwdWxsLXJpZ2h0IiBpZD0iQ293JytpKyciID48L2xhYmVsPjxicj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Nob3dQcm9ncmVzcycpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MiICBpZD0icHJvZ3Jlc3NJRCcraSsnIiAgc3R5bGU9ImZvbnQtc2l6ZToxMXB4OyI+PC9kaXY+PGJyPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUkVXQVJEJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdET1VCTEUnKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbnVyZSA9IDIzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtbyA9IDEzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdQUkVNSVVNJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAzNjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKSsnID09PT09ICAnK3RlbnVyZSsnICAgJytjb250YWN0W2ldLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRobHlfcmV0dXJuID0gcGFyc2VGbG9hdCggcGFyc2VGbG9hdChjb250YWN0W2ldLnJldHVybl9tb25leS50b1N0cmluZygpLnNwbGl0KCcsJylbMF0pLzIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IGNvbnRhY3RbaV0uZGF0ZV9yZWdfcHJvZHVjdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gMTI7Ly9wYXJzZUludChzdG9yZVByb2R1Y3Rbal0udG9TdHJpbmcoKS5zcGxpdCgnOjo6OicpWzVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gNzsvL3BhcnNlSW50KHBhcnNlRmxvYXQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs0XSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbW9udGhseV9yZXR1cm4gPSA0MDAwLzI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXQgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZFRoZSA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9udGhBcnJheXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpaiA9IDA7IGlqIDwgKHRlbnVyZSArIDEpOyBpaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaHlzaWNhbE1vbmV5ID0gcGFyc2VGbG9hdChjb250YWN0W2ldLmFtb3VudCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnQgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGlmKG5vdy5zcGxpdCgnLScpWzFdLmxlbmd0aCA9PT0gMSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnQgPSBwYXJzZUludCgnMCcrbm93LnNwbGl0KCctJylbMV0pIC0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udCA9IG5vdy5zcGxpdCgnLScpWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIChtb250ICsgaWopLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICBcDQogICAgdmFyIGRhdDsNCiAgICBpZighaXNWYWxpZERhdGUobm93LnNwbGl0KCctJylbMF0sIGZ1dHVyZS5nZXRNb250aCgpLCBmdXR1cmUuZ2V0RnVsbFllYXIoKSkpew0KICAgICAgICBhbGVydCgnc3Nzc3MnKTsNCiAgICAgICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShmdXR1cmUuZ2V0RnVsbFllYXIoKSwgZnV0dXJlLmdldE1vbnRoKCksIDApOw0KICAgICAgICBkYXQgPSAoKGxhc3REYXkuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSsiLyIrbGFzdERheS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgfWVsc2V7DQogICAgIGRhdCA9IChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KG5vdy5zcGxpdCgnLScpWzBdKycgICAnK3BhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSk7ICAvLy50b0ZpeGVkKDIpDQovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1dHVyZSA7DQovLyAgICAgICAgZnV0dXJlID0gbmV3IERhdGUobm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSwgcGFyc2VJbnQocGFyc2VJbnQobW9udCkgKyBwYXJzZUludChpaikpLCBub3cuc3BsaXQoJy0nKVswXSk7ICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICBpZighaXNWYWxpZERhdGUobm93LnNwbGl0KCctJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSkpew0KLy8vLy8vICAgICAgICAgICANCi8vICAgICAgICAgICB2YXIgbGFzdERheSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgMCk7DQovLy8vLy8gICAgICAgICAgICBmdXR1cmUgPSBuZXcgRGF0ZShmdXR1cmUuZ2V0RnVsbFllYXIoKSwgZnV0dXJlLmdldE1vbnRoKCksIGxhc3REYXkuZ2V0RGF0ZSgpKTsNCi8vLy8gICAgICAgICAgIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbGFzdERheS5nZXREYXRlKCkpOw0KLy8vLyAgICAgICAgICAgIG1vbnRoQXJyYXlzLnB1c2goRGF0ZS5wYXJzZSggICAgKSk7DQovLyAgICAgICAgICAgIGFsZXJ0KCdlZWUgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOw0KLy8gICAgICAgICAgICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8vLyAgICAgICAgICAgICAgYWxlcnQoJ2ZmZmYgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOyANCi8vICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc29sZS5sb2coZGF0KTsNCi8vICAgICAgIH1lbHNlew0KLy8gICAgICAgICAgIGFsZXJ0KCdkZGQnKTsNCi8vICAgICAgICAgICBmdXR1cmUgPSBuZXcgRGF0ZShub3cuc3BsaXQoJy0nKVsyXS5zcGxpdCgnICcpWzBdLCBwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSksIG5vdy5zcGxpdCgnLScpWzBdKTsNCi8vICAgICAgIH0NCi8vICAgIHZhciBjdXJyZW50X01vbnQgPSBuZXcgRGF0ZSgpOyAgICAgIA0KICAgIA0KLy8gICAgdmFyIGQ7IC8vID0gbmV3IERhdGUoZnV0dXJlLmdldEZ1bGxZZWFyKCksIChmdXR1cmUuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICBpZihkYXQgPT09ICcnKXsNCi8vICAgIGRhdCA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQovLyAgICBkID0gbmV3IERhdGUoZnV0dXJlLmdldEZ1bGxZZWFyKCksIChmdXR1cmUuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSApOw0KLy8gICAgfWVsc2V7DQovLyAgICAgICAgZGF0ID0gZGF0ZTEyOw0KLy8vLyAgICAgICAgZCA9IG5ldyBEYXRlKGZ1dHVyZS5nZXRGdWxsWWVhcigpLCAoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8gICAgICAgIA0KLy8vLyAgICAgICAgYWxlcnQoZGF0KydcbiBMRVhYWFhYJyk7DQovLyAgICB9DQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0Zyb20gaGVyZQ0KICAgIA0KICAgIA0KICAgIA0KICAgIA0KLy8gICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkYXRlMTIuZ2V0RnVsbFllYXIoKSwgZGF0ZTEyLmdldE1vbnRoKCkrMSwgMCk7DQovLyAgICB2YXIgZGF0ZTEyID0gbmV3IERhdGUoKGQuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7IC8vRGF0ZS5wYXJzZSggKGZ1dHVyZS5nZXRNb250aCgpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSkudG9TdHJpbmcoKSk7DQovLyAgICBpZihpc1ZhbGlkRGF0ZShub3cuc3BsaXQoJy0nKVswXSwgZC5nZXRNb250aCgpLCBkLmdldEZ1bGxZZWFyKCkpKXsgDQovLyAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2RhdC5nZXRGdWxsWWVhcigpKTsNCi8vLy8gICAgZC5zZXRNb250aChkYXRlMTIuZ2V0TW9udGgoKSApOw0KLy8gICAgfWVsc2V7DQovLyAgICAgICAgDQovLyAgICAgICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSwgMCk7DQovLyAgICAgICAgYWxlcnQoJ3NzXG4nKycgICcrbGFzdERheS5nZXREYXRlKCkrJyAgICAgJytsYXN0RGF5LmdldE1vbnRoKCkpOw0KLy8gICAgZGF0ZTEyID0gbmV3IERhdGUoKGQuZ2V0TW9udGgoKSApKyIvIitsYXN0RGF5LmdldERhdGUoKSsiLyIrZC5nZXRGdWxsWWVhcigpKTsgLy9EYXRlLnBhcnNlKCAoZnV0dXJlLmdldE1vbnRoKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpKTsgICAgICAgICANCi8vICAgIGFsZXJ0KCdzc1xuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXRlMTIuZ2V0TW9udGgoKSk7DQovLy8vICAgICBkID0gbmV3IERhdGUoZGF0ZTEyLmdldEZ1bGxZZWFyKCksIChkYXRlMTIuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLy8vICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSApOw0KLy8gICAgZCA9IG5ldyBEYXRlKGZ1dHVyZS5nZXRGdWxsWWVhcigpLCAoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8gICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgKTsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7DQovLyAgICAgICAgICAgICAgDQovLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRUaGUgPT09ICcnKXsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnc3d3dyAnKyhkLmdldE1vbnRoKCkgKzEpKTsNCi8vdmFyIGRhdGUxMiA9IG5ldyBEYXRlKChkYXQuZ2V0TW9udGgoKSArMSApKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZC5nZXRGdWxsWWVhcigpKTsgLy9EYXRlLnBhcnNlKCAoZnV0dXJlLmdldE1vbnRoKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpKTsgICAgICAgICANCi8vICAgIGFsZXJ0KCdzc1paWlxuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXQuZ2V0TW9udGgoKSk7DQovLy8vICAgIGRUaGUgPSBkYXRlMTIuZ2V0TW9udGgoKTsNCi8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZFRoZSAhPT0gZGF0ZTEyLmdldE1vbnRoKCkgJiYgZFRoZSAhPT0gJycpew0KLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ3N3d3cgJytkVGhlKycgIT09ICcrZGF0ZTEyLmdldE1vbnRoKCkpOw0KLy8vL3ZhciBkYXRlMTIgPSBuZXcgRGF0ZSgoZC5nZXRNb250aCgpICkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitkLmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOyAgICAgICAgIA0KLy8vLyAgICBhbGVydCgnc3NaQ0NDQ0NaWlxuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXRlMTIuZ2V0TW9udGgoKSk7DQovLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KLy8vLyAgICAgICAgIGFsZXJ0KCdzd3d3Jyk7DQovLy8vdmFyIGRhdGUxMiA9IG5ldyBEYXRlKChkLmdldE1vbnRoKCkgKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2QuZ2V0RnVsbFllYXIoKSk7IC8vRGF0ZS5wYXJzZSggKGZ1dHVyZS5nZXRNb250aCgpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSkudG9TdHJpbmcoKSk7ICAgICAgICAgDQovLy8vICAgIGFsZXJ0KCdzc1pXV1dXV1paXG4nKycgICcrZGF0ZTEyLmdldERhdGUoKSsnICAgICAnK2RhdGUxMi5nZXRNb250aCgpKTsNCi8vLy8gICAgICAgICAgICAgICAgICAgICAgICB9DQovLyAgICAgICAgICAgICAgICAgICAgfQ0KICAgICANCiAgICAgDQogICAgDQovLyAgICB0aWxsIGhlcmUNCiAgICANCi8vICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gICAgY29uc29sZS5sb2coZGF0LCAnIE5FWFIgJywgZGF0ZTEyKTsNCi8vICAgIGNvbnNvbGUubG9nKCdIZXJlICcsIGZ1dHVyZSk7DQogIA0KLy8gIGlmIChpaiA9PT0gKHRlbnVyZSAtIDEgKSApew0KLy8gICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZGF0ZTEyLmdldE1vbnRoKCldOw0KLy8gICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8gICAgIC8vDQovLyAgICAgDQovLyAgICAgaWYoIWlzVmFsaWREYXRlKGRhdGUxMi5nZXREYXRlKCksIGRhdGUxMi5nZXRNb250aCgpLCBkYXRlMTIuZ2V0RnVsbFllYXIoKSkpew0KLy8gICAgICAgICANCi8vICAgICB9DQovLyAgICAgaWYoZGF0ZUNoZWNrKGRhdCxkYXRlMTIsY3VycmVudF9Nb250KSl7DQovLy8vICAgIGFsZXJ0KCJBdmFpbGVkXG4iK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSsnXG4nK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSk7DQovL3RvdGFsID0gdG90YWwgKyAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICk7DQovLyAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KLy8gICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDonK2NhbCsnJSIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrICggKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApKS50b0ZpeGVkKDIpICAgICArICdcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIA0KLy8gICAgfWVsc2UgaWYoZGF0ZUNoZWNrQ3VycmVudChkYXQsZGF0ZTEyLGN1cnJlbnRfTW9udCkpew0KLy8gICAgYWxlcnQoIk5vdCBBdmFpbGVkIDIiKTsNCi8vICAgIHRvdGFsID0gdG90YWwgKyBwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKTsNCi8vICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy13YXJuaW5nIiBzdHlsZT0id2lkdGg6JytwZXIrJyUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBtb250aGx5X3JldHVybiArJ1xuXA0KLy8gICAgICAgIDwvZGl2PicpOw0KLy8gICAgfQ0KLy8gICAgIC8vDQovLyAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLyAgfWVsc2V7DQovLyAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tkYXRlMTIuZ2V0TW9udGgoKV07DQovLy8vICAgICAgdmFyIG1vblQgPSBmdXR1cmUuZ2V0TW9udGgoKSsxOw0KLy8gICAgICBpZihpaiA8PSAobWVtby0gMSkpew0KLy8gICAgICAgICAgDQovLyAgICAgICAgICBpZihkYXRlQ2hlY2soZGF0LGRhdGUxMixjdXJyZW50X01vbnQpKXsNCi8vLy8gICAgYWxlcnQoIkF2YWlsZWRcbiIrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKydcbicrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vLy8gICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkYXRlMTIuZ2V0RnVsbFllYXIoKSwgZGF0ZTEyLmdldE1vbnRoKCkrMSwgMCk7DQovLy8vICAgIGFsZXJ0KGxhc3REYXkuZ2V0RGF0ZSgpKycgICAgICcrbGFzdERheS5nZXRNb250aCgpKycgICcrZGF0ZTEyLmdldE1vbnRoKCkpOw0KLy8gICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KLy8gICAgdG90YWwgPSB0b3RhbCArICgoKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKTsNCi8vICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JytjYWwrJyUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyAoICgoKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKSkudG9GaXhlZCgyKSAgICAgKyAnXG5cDQovLyAgICAgICAgPC9kaXY+Jyk7DQovLyAgICB9ZWxzZSBpZihkYXRlQ2hlY2tDdXJyZW50KGRhdCxkYXRlMTIsY3VycmVudF9Nb250KSl7DQovLy8vICAgIGFsZXJ0KCJOb3QgQXZhaWxlZCAyIik7DQovLyAgICB0b3RhbCA9IHRvdGFsICsgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctd2FybmluZyIgc3R5bGU9IndpZHRoOicrcGVyKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgbW9udGhseV9yZXR1cm4gKydcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIH0NCi8vICAgICAgICAgIA0KLy8gICAgICAgICAgDQovLw0KLy8gICAgICAgICAgICAgICAgfWlmKGlqID4gKG1lbW8tIDEpKXsNCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLw0KLy9pZihkYXRlQ2hlY2soZGF0LGRhdGUxMixjdXJyZW50X01vbnQpKXsNCi8vLy8gICAgYWxlcnQoIkF2YWlsZWRcbiIrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKydcbicrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCi8vICAgIHRvdGFsID0gdG90YWwgKyAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICk7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOicrY2FsKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgKCAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkpLnRvRml4ZWQoMikgICAgICsgJ1xuXA0KLy8gICAgICAgIDwvZGl2PicpOw0KLy8gICAgfWVsc2UgaWYoZGF0ZUNoZWNrQ3VycmVudChkYXQsZGF0ZTEyLGN1cnJlbnRfTW9udCkpew0KLy8vLyAgICBhbGVydCgiTm90IEF2YWlsZWQgMiIpOw0KLy90b3RhbCA9IHRvdGFsICsgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctd2FybmluZyIgc3R5bGU9IndpZHRoOicrcGVyKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgbW9udGhseV9yZXR1cm4gKydcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIH0NCi8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8gICAgICAgICAgICAgICAgfQ0KLy8gICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI0NvdycraSkudGV4dCgnVG90YWwgOiAnK3RvdGFsLnRvRml4ZWQoMikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL3ByaW1hcnkgICBzdWNjZXNzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICANCi8vICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAkKCcjbG9hZGVyJykuaGlkZSgpOw0KICANCiAgICB9';
    exportToTxt(vvv, 'txt');
//        console.log(file);
//    var blob = new Blob([file], {type: "application/doc"});
//var link = document.createElement("a");
//link.href = window.URL.createObjectURL(blob);
//link.download = "myFileName.doc";
//link.click();
}

function exportToTxt(tile, exe){
     
     function download() {

    var fileContents = tile;//JSON.stringify(jsonObject, null, 2);
    var fileName = 'sss'//$('#Fname').text().toString().split('.txt')[0];

    var pp = document.createElement('a');
    pp.setAttribute('href', encodeURIComponent(fileContents));
    pp.setAttribute('download', fileName+"."+exe);
    pp.click();
  }
  setTimeout(function() {
    download()
  }, 500);
 }
 
 
 
 
 function createFile(){
var object = new ActiveXObject("Scripting.FileSystemObject");
var file = object.CreateTextFile("C:\\Hello.txt", false);
file.WriteLine('Hello World');
file.WriteLine('Hope is a thing with feathers, that perches on the soul.'); 
file.Close();
}



//////////////////////////
//return a promise that resolves with a File instance
function urltoFile(url, filename, mimeType){
    mimeType = mimeType || (url.match(/^data:([^;]+);/)||'')[1];
    return (fetch(url)
        .then(function(res){return res.arrayBuffer();})
        .then(function(buf){return new File([buf], filename, {type:mimeType});})
    );
}
var vvv = 'data:text/plain;base64,PHNjcmlwdD4NCiAgICAgZnVuY3Rpb24gZGF5X3MoZGF0ZTEsIGRhdGUyKXsNCi8vICAgICAgICAgIGFsZXJ0KGRhdGUyKTsNCiAgICAgICAgICAvLyBUbyBjYWxjdWxhdGUgdGhlIHRpbWUgZGlmZmVyZW5jZSBvZiB0d28gZGF0ZXMgDQp2YXIgRGlmZmVyZW5jZV9Jbl9UaW1lID0gZGF0ZTIuZ2V0VGltZSgpIC0gZGF0ZTEuZ2V0VGltZSgpOyANCiAgDQovLyBUbyBjYWxjdWxhdGUgdGhlIG5vLiBvZiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIA0KdmFyIERpZmZlcmVuY2VfSW5fRGF5cyA9IERpZmZlcmVuY2VfSW5fVGltZSAvICgxMDAwICogMzYwMCAqIDI0KTsNCiAgICANCiAgICByZXR1cm4gRGlmZmVyZW5jZV9Jbl9EYXlzOw0KDQogICAgICB9IA0KICBmdW5jdGlvbiBpc0RhdGVHcmVhdGVyVGhhblRvZGF5KGIpew0KICAgICAgdmFyIGRTID0gYi5zcGxpdCgiLyIpOw0KICAgICAgdmFyIGQxID0gbmV3IERhdGUoZFNbMV0sICgrZFNbMF0gLSAxKSk7DQogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgaWYoZDEgPiB0b2RheSl7DQogICAgICAgICAgcmV0dXJuICdOJzsNCiAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiAnWSc7DQogICAgICB9DQogIH0NCiAgDQogIGZ1bmN0aW9uIFNwb25zb3JzaGlwUHJvZ3Jlc3MoKXsNCiAgICAgICAgICAgIHZhciBpZF9zZXNzaW9uID0gJCgnI2lkX3Nlc3Npb24nKS52YWwoKTsNCiAgICAgICAgICAgIHZhciBlbWFpbF9hZGRyZXNzX3Nlc3Npb24gPSAkKCcjZW1haWxfYWRkcmVzc19zZXNzaW9uJykudmFsKCk7DQovLyAgICAgICAgYWxlcnQoZW1haWxfYWRkcmVzc19zZXNzaW9uKSAgICA7ICAgIA0KICAgICAgICAgICAgJC5nZXQoJy4uL3BocC5jb25uZWN0aW9uL2Nvbm5lY3QucGhwP2xvYWQ9cmV0cmlldmVTcG9uc29yc2hpcCcse2lkX3Nlc3Npb246aWRfc2Vzc2lvbiwgZW1haWxfYWRkcmVzc19zZXNzaW9uOmVtYWlsX2FkZHJlc3Nfc2Vzc2lvbn0sIGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMpew0KICAgICAgICAgICAgIHZhciB0aGVNb250aHMgPSBuZXcgQXJyYXkoIkphbiIsICJGZWIiLCAiTWFyIiwgIkFwciIsICJNYXkiLCAiSnVuIiwgIkp1bCIsICJBdWciLCAiU2VwIiwgIk9jdCIsICJOb3YiLCAiRGVjIik7DQogICAgICAgICAgICAgICAgaWYoZGF0YSAhPT0gJycpew0KICAgICAgICAgICAgICAgICAgICB2YXIgIGNvbnRhY3QgPSBKU09OLnBhcnNlKGRhdGEpOw0KICAgICAgICAgICAgICAgICAgICAgICB2YXIgaiA9IDA7DQogICAgICAgIC8vIFJFV0FSRCAgIDEyLCAgRE9VQkxFIDIzLCAgUFJFTUlVTSAzNg0KICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgY29udGFjdC5sZW5ndGg7IGkrKyl7DQovLyAgICAgICAgICAgICAgICAgICAgaWYobXlJZEQudG9TdHJpbmcoKSA9PT0gY29udGFjdFtpXS5pZC50b1N0cmluZygpKXsNCg0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIC8vZGF0ZV9yZWdfcHJvZHVjdCwgICBhbW91bnQNCiAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW51cmUgPSAwIDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1lbW8gPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRhY3RbaV0uc3RhdHVzID09PSAnYWN0aXZlJyAmJiBpID09PSAwKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA9PT0gJ1JFV0FSRCcpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVudXJlID0gMTI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vID0gNzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnRE9VQkxFJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAyMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUFJFTUlVTScpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVudXJlID0gMzY7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1vID0gMTM7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsZXJ0KGNvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkrJyA9PT09PSAgJyt0ZW51cmUrJyAgICcrY29udGFjdFtpXS5pZCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb250aGx5X3JldHVybiA9IHBhcnNlRmxvYXQoIHBhcnNlRmxvYXQoY29udGFjdFtpXS5yZXR1cm5fbW9uZXkudG9TdHJpbmcoKS5zcGxpdCgnLCcpWzBdKS8yKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG5vdyA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3cgPSBjb250YWN0W2ldLmRhdGVfcmVnX3Byb2R1Y3Q7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICA9IDEyOy8vcGFyc2VJbnQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs1XSk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICA9IDc7Ly9wYXJzZUludChwYXJzZUZsb2F0KHN0b3JlUHJvZHVjdFtqXS50b1N0cmluZygpLnNwbGl0KCc6Ojo6JylbNF0pKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmFyIG1vbnRobHlfcmV0dXJuID0gNDAwMC8yOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGh5c2ljYWxNb25leSA9IGNvbnRhY3RbaV0uYW1vdW50Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlqID0gMDsgaWogPCB0ZW51cmU7IGlqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnQgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5vdy5zcGxpdCgnLScpWzFdLmxlbmd0aCA9PT0gMSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnQgPSBwYXJzZUludCgnMCcrbm93LnNwbGl0KCctJylbMV0pOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb250ID0gbm93LnNwbGl0KCctJylbMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQobW9udCsnICAgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOw0KICB2YXIgZnV0dXJlID0gbmV3IERhdGUobm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSwgKG1vbnQgKyBpaiksIG5vdy5zcGxpdCgnLScpWzBdKTsNCiAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICAgDQogICAgdmFyIGRhdCA9IChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgYWxlcnQoZGF0KQ0KLy8gICAgIHZhciBkYXRlMTIgPSBuZXcgRGF0ZSgiMDcvMjgvMjAyMCIpOyANCi8vICAgICB2YXIgZGF0ZTIyID0gbmV3IERhdGUoIjA4LzI4LzIwMjAiKTsNCi8vIC8vYWxlcnQoY3VycmVudF9Nb250LmdldE1vbnRoKCkrIi8iK2N1cnJlbnRfTW9udC5nZXREYXRlKCkrIi8iK2N1cnJlbnRfTW9udC5nZXRGdWxsWWVhcigpKQ0KLy8gICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gLy8gICAgYWxlcnQoZGF5X3MoZGF0ZTEsIGN1cnJlbnRfZGF0ZSkrJyAgICcrY3VycmVudF9Nb250LmdldE1vbnRoKCkpOw0KLy8gICBpZiAoaWogPT09ICh0ZW51cmUgLSAxKSApew0KLy8gICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXQpID09PSAnWScpew0KICAgICAgDQovLyAgICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZnV0dXJlLmdldE1vbnRoKCldOw0KLy8gLy8gICAgICAgIHZhciB5ZWFyID0gZnV0dXJlLmdldEZ1bGxZZWFyKCk7DQovLyAgICAgICAkKCcjcHJvZ3Jlc3NJRCcpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolIiBpZD0iJyttb250aCsnIiA+Jyttb250aCsnICcrICByb3VuZFVwKCggKCgobW9udGhseV9yZXR1cm4vZGF5X3MoZGF0ZTEyLCBkYXRlMjIpKSAqIGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSkgK3BoeXNpY2FsTW9uZXkgICkpLCAyKSAgICAgKyclXG5cDQovLyAgICAgICAgIDwvZGl2PicpOw0KLy8gICAgICAgICAgICAgfQ0KLy8gICB9ZWxzZXsNCi8vICAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tmdXR1cmUuZ2V0TW9udGgoKV07DQovLyAgICAgICBpZihpaiA8IChtZW1vLSAxKSAmJiBmdXR1cmUuZ2V0TW9udGgoKSA8PSBjdXJyZW50X01vbnQuZ2V0TW9udGgoKSl7DQogICAgICANCi8vICAgICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXQpID09PSAnWScpew0KLy8gICAgICAgICAgICAgLy8gYWxlcnQocGFyc2VGbG9hdChtb250aGx5X3JldHVybikrJyAvICcrcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGRhdGUyMikpKydcbiAgICcrcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vICAgICAgICQoJyNwcm9ncmVzc0lEJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyByb3VuZFVwKCggKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXRlMTIsIGRhdGUyMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKSkgICApKSwgMikgICAgICsgJyVcblwNCi8vICAgICAgICAgPC9kaXY+Jyk7DQovLyAgICAgICAgICAgICAgICAgfQ0KLy8gICAgICAgICAgICAgICAgIH1pZihpaiA+IChtZW1vLSAxKSl7DQovLyAgICAgICAgICAgICAgICAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0KSA9PT0gJ1knKXsgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICQoJyNwcm9ncmVzc0lEJykuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyAoICgoKG1vbnRobHlfcmV0dXJuL2RheV9zKGRhdGUxMiwgZGF0ZTIyKSkgKiBkYXlfcyhkYXRlMTIsIGN1cnJlbnRfZGF0ZSkpICsgcGh5c2ljYWxNb25leSAgKSkgICAgICsgJyVcblwNCi8vICAgICAgICAgPC9kaXY+Jyk7ICAgIA0KLy8gICAgICAgICAgICAgICAgIH0NCi8vICAgICAgICAgICAgICAgICB9DQovLyAgICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH1lbHNlew0KLy8gICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KLy8gICAgICAgICAgICAkKCcjbG9hZGVyJykuaGlkZSgpOw0KICANCiAgICB9DQogICAgDQogZnVuY3Rpb24gcm91bmRVcChudW0sIHByZWNpc2lvbikgew0KIHByZWNpc2lvbiA9IE1hdGgucG93KDEwLCBwcmVjaXNpb24pOw0KIHJldHVybiBNYXRoLmNlaWwobnVtICogcHJlY2lzaW9uKSAvIHByZWNpc2lvbjsNCn0gICANCiAgICANCiAgICANCiAgU3BvbnNvcnNoaXBQcm9ncmVzcygpOw0KPC9zY3JpcHQ+DQoNCjxkaXYgY2xhc3M9InJvdyIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHgiPg0KIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+ICAgDQo8ZGl2IGlkPSJhY2NvcmRpb24yIj4NCg0KICA8ZGl2IGNsYXNzPSJjYXJkIj4NCiAgICA8ZGl2IGNsYXNzPSJjYXJkLWhlYWRlciI+DQogICAgICA8YSBjbGFzcz0iY2FyZC1saW5rIiBkYXRhLXRvZ2dsZT0iY29sbGFwc2UiIGhyZWY9IiNjb2xsYXBzZU9uZTIiPg0KICAgICAgICBBY3RpdmUgDQogICAgICA8L2E+DQogICAgPC9kaXY+DQogICAgPGRpdiBpZD0iY29sbGFwc2VPbmUyIiBjbGFzcz0iY29sbGFwc2Ugc2hvdyIgZGF0YS1wYXJlbnQ9IiNhY2NvcmRpb24yIj4NCiAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+DQogICAgICAgIDxkaXYgaWQ9InNob3dQcm9ncmVzcyI+DQogICAgICAgICAgICA8ZGl2IGNsYXNzPSJwcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo3cHg7IiBpZD0icHJvZ3Jlc3NJRCI+DQogICAgICAgIA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgPC9kaXY+DQogICAgICAgIDwvZGl2Pg0KICAgICAgPC9kaXY+DQogICAgPC9kaXY+DQogIDwvZGl2Pg0KDQogIDwhLS08ZGl2IGNsYXNzPSJjYXJkIj4tLT4NCiAgPCEtLSAgPGRpdiBjbGFzcz0iY2FyZC1oZWFkZXIiPi0tPg0KICA8IS0tICAgIDxhIGNsYXNzPSJjb2xsYXBzZWQgY2FyZC1saW5rIiBkYXRhLXRvZ2dsZT0iY29sbGFwc2UiIGhyZWY9IiNjb2xsYXBzZVR3bzIiPi0tPg0KICA8IS0tICAgICAgSGFydmVzdGVkLS0+DQogIDwhLS0gICAgPC9hPi0tPg0KICA8IS0tICA8L2Rpdj4tLT4NCiAgPCEtLSAgPGRpdiBpZD0iY29sbGFwc2VUd28yIiBjbGFzcz0iY29sbGFwc2UiIGRhdGEtcGFyZW50PSIjYWNjb3JkaW9uMiI+LS0+DQogIDwhLS0gICAgPGRpdiBjbGFzcz0iY2FyZC1ib2R5Ij4tLT4NCiAgPCEtLSAgICAgIExvcmVtIGlwc3VtLi4tLT4NCiAgPCEtLSAgICA8L2Rpdj4tLT4NCiAgPCEtLSAgPC9kaXY+LS0+DQogIDwhLS08L2Rpdj4tLT4NCg0KICANCjwvZGl2Pg0KPC9kaXY+DQogICAgDQo8L2Rpdj4NCg0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KPHNjcmlwdD4NCiAgICAgZnVuY3Rpb24gZGF5X3MoZGF0ZTEsIGRhdGUyKXsNCi8vICAgICAgICAgIGFsZXJ0KGRhdGUyKTsNCiAgICAgICAgICAvLyBUbyBjYWxjdWxhdGUgdGhlIHRpbWUgZGlmZmVyZW5jZSBvZiB0d28gZGF0ZXMgDQp2YXIgRGlmZmVyZW5jZV9Jbl9UaW1lID0gZGF0ZTIuZ2V0VGltZSgpIC0gZGF0ZTEuZ2V0VGltZSgpOyANCiAgDQovLyBUbyBjYWxjdWxhdGUgdGhlIG5vLiBvZiBkYXlzIGJldHdlZW4gdHdvIGRhdGVzIA0KdmFyIERpZmZlcmVuY2VfSW5fRGF5cyA9IERpZmZlcmVuY2VfSW5fVGltZSAvICgxMDAwICogMzYwMCAqIDI0KTsNCiAgICANCiAgICByZXR1cm4gRGlmZmVyZW5jZV9Jbl9EYXlzOw0KDQogICAgICB9IA0KICBmdW5jdGlvbiBpc0RhdGVHcmVhdGVyVGhhblRvZGF5KGIpew0KICAgICAgdmFyIGRTID0gYi5zcGxpdCgiLyIpOw0KICAgICAgdmFyIGQxID0gbmV3IERhdGUoZFNbMV0sICgrZFNbMF0gLSAxKSk7DQogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOw0KICAgICAgaWYoZDEgPiB0b2RheSl7DQogICAgICAgICAgcmV0dXJuICdOJzsNCiAgICAgIH1lbHNlew0KICAgICAgICAgIHJldHVybiAnWSc7DQogICAgICB9DQogIH0NCiAgDQogIHZhciBEYXRlRGlmZiA9IHsNCg0KICAgIGluRGF5czogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciB0MiA9IGQyLmdldFRpbWUoKTsNCiAgICAgICAgdmFyIHQxID0gZDEuZ2V0VGltZSgpOw0KDQogICAgICAgIHJldHVybiBwYXJzZUludCgodDItdDEpLygyNCozNjAwKjEwMDApKTsNCiAgICB9LA0KDQogICAgaW5XZWVrczogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciB0MiA9IGQyLmdldFRpbWUoKTsNCiAgICAgICAgdmFyIHQxID0gZDEuZ2V0VGltZSgpOw0KDQogICAgICAgIHJldHVybiBwYXJzZUludCgodDItdDEpLygyNCozNjAwKjEwMDAqNykpOw0KICAgIH0sDQoNCiAgICBpbk1vbnRoczogZnVuY3Rpb24oZDEsIGQyKSB7DQogICAgICAgIHZhciBkMVkgPSBkMS5nZXRGdWxsWWVhcigpOw0KICAgICAgICB2YXIgZDJZID0gZDIuZ2V0RnVsbFllYXIoKTsNCiAgICAgICAgdmFyIGQxTSA9IGQxLmdldE1vbnRoKCk7DQogICAgICAgIHZhciBkMk0gPSBkMi5nZXRNb250aCgpOw0KDQogICAgICAgIHJldHVybiAoZDJNKzEyKmQyWSktKGQxTSsxMipkMVkpOw0KICAgIH0sDQoNCiAgICBpblllYXJzOiBmdW5jdGlvbihkMSwgZDIpIHsNCiAgICAgICAgcmV0dXJuIGQyLmdldEZ1bGxZZWFyKCktZDEuZ2V0RnVsbFllYXIoKTsNCiAgICB9DQp9DQoNCiAgZnVuY3Rpb24gU3BvbnNvcnNoaXBQcm9ncmVzcygpew0KICAgICAgICAgICAgdmFyIGlkX3Nlc3Npb24gPSAkKCcjaWRfc2Vzc2lvbicpLnZhbCgpOw0KICAgICAgICAgICAgdmFyIGVtYWlsX2FkZHJlc3Nfc2Vzc2lvbiA9ICQoJyNlbWFpbF9hZGRyZXNzX3Nlc3Npb24nKS52YWwoKTsNCi8vICAgICAgICBhbGVydChlbWFpbF9hZGRyZXNzX3Nlc3Npb24pICAgIDsgICAgDQogICAgICAgICAgICAkLmdldCgnLi4vcGhwLmNvbm5lY3Rpb24vY29ubmVjdC5waHA/bG9hZD1yZXRyaWV2ZVNwb25zb3JzaGlwJyx7aWRfc2Vzc2lvbjppZF9zZXNzaW9uLCBlbWFpbF9hZGRyZXNzX3Nlc3Npb246ZW1haWxfYWRkcmVzc19zZXNzaW9ufSwgZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cyl7DQogICAgICAgICAgICAgdmFyIHRoZU1vbnRocyA9IG5ldyBBcnJheSgiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLCAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiKTsNCiAgICAgICAgICAgICAgICBpZihkYXRhICE9PSAnJyl7DQogICAgICAgICAgICAgICAgICAgIHZhciAgY29udGFjdCA9IEpTT04ucGFyc2UoZGF0YSk7DQogICAgICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsNCiAgICAgICAgLy8gUkVXQVJEICAgMTIsICBET1VCTEUgMjMsICBQUkVNSVVNIDM2DQogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb250YWN0Lmxlbmd0aDsgaSsrKXsNCi8vICAgICAgICAgICAgICAgICAgICBpZihteUlkRC50b1N0cmluZygpID09PSBjb250YWN0W2ldLmlkLnRvU3RyaW5nKCkpew0KDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgLy9kYXRlX3JlZ19wcm9kdWN0LCAgIGFtb3VudA0KICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbnVyZSA9IDAgOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtbyA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZXIgPSAxMDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5zdGF0dXMgPT09ICdhY3RpdmUnICl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG93UHJvZ3Jlc3MnKS5hcHBlbmQoJzxsYWJlbCBpZD0iaG93JytpKyciID4nK2NvbnRhY3RbaV0ucHJvZHVjdF9uYW1lLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSsnPC9sYWJlbD48YnI+Jyk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzaG93UHJvZ3Jlc3MnKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzIiAgaWQ9InByb2dyZXNzSUQnK2krJyIgIHN0eWxlPSJmb250LXNpemU6NnB4OyI+PC9kaXY+PGJyPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUkVXQVJEJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdET1VCTEUnKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbnVyZSA9IDIzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtbyA9IDEzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdQUkVNSVVNJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAzNjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWxlcnQoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKSsnID09PT09ICAnK3RlbnVyZSsnICAgJytjb250YWN0W2ldLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRobHlfcmV0dXJuID0gcGFyc2VGbG9hdCggcGFyc2VGbG9hdChjb250YWN0W2ldLnJldHVybl9tb25leS50b1N0cmluZygpLnNwbGl0KCcsJylbMF0pLzIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IGNvbnRhY3RbaV0uZGF0ZV9yZWdfcHJvZHVjdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gMTI7Ly9wYXJzZUludChzdG9yZVByb2R1Y3Rbal0udG9TdHJpbmcoKS5zcGxpdCgnOjo6OicpWzVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gNzsvL3BhcnNlSW50KHBhcnNlRmxvYXQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs0XSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbW9udGhseV9yZXR1cm4gPSA0MDAwLzI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlqID0gMDsgaWogPCB0ZW51cmU7IGlqKyspIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBoeXNpY2FsTW9uZXkgPSBwYXJzZUZsb2F0KGNvbnRhY3RbaV0uYW1vdW50KTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9udCA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgaWYobm93LnNwbGl0KCctJylbMV0ubGVuZ3RoID09PSAxKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udCA9IHBhcnNlSW50KCcwJytub3cuc3BsaXQoJy0nKVsxXSkgLSAxOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICBtb250ID0gbm93LnNwbGl0KCctJylbMV07DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICBhbGVydChtb250KycgICAnK3BhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSk7ICAvLy50b0ZpeGVkKDIpDQogIHZhciBmdXR1cmUgPSBuZXcgRGF0ZShub3cuc3BsaXQoJy0nKVsyXS5zcGxpdCgnICcpWzBdLCBwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSksIG5vdy5zcGxpdCgnLScpWzBdKTsNCiAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICAgDQogICAgdmFyIGRhdENhbGwgPSAoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpOw0KICAgIHZhciBkYXQgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgIC8vIGFsZXJ0KGRhdENhbGwpOw0KICAgIHZhciBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAyKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KICAgIA0KICAgIC8vIGFsZXJ0KGRhdGUxMik7DQogICAgDQogICAgLy8gYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKTsNCiAgICAvLyB2YXIgZGF0ZTIyID0gbmV3IERhdGUoIjA4LzI4LzIwMjAiKTsNCi8vYWxlcnQoY3VycmVudF9Nb250LmdldE1vbnRoKCkrIi8iK2N1cnJlbnRfTW9udC5nZXREYXRlKCkrIi8iK2N1cnJlbnRfTW9udC5nZXRGdWxsWWVhcigpKQ0KICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gLy8gICAgYWxlcnQoZGF5X3MoZGF0ZTEsIGN1cnJlbnRfZGF0ZSkrJyAgICcrY3VycmVudF9Nb250LmdldE1vbnRoKCkpOw0KLy8gYWxlcnQoZGF0KydcbicrZGF0ZTEyKydcbicrZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKTsNCiAgaWYgKGlqID09PSAodGVudXJlIC0gMSkgKXsNCiAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0Q2FsbCkgPT09ICdZJyl7DQogICAgICANCiAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tmdXR1cmUuZ2V0TW9udGgoKV07DQovLyAgICAgICAgdmFyIHllYXIgPSBmdXR1cmUuZ2V0RnVsbFllYXIoKTsNCiAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYobW9udGhfID49IDEpew0KICAgICAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctcHJpbWFyeSIgc3R5bGU9IndpZHRoOiUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICAgKyAnXG5cDQogICAgICAgIDwvZGl2PicpOyAgICAgICAgICANCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0ZTEyLCBjdXJyZW50X2RhdGUpKSkpLnRvRml4ZWQoMik7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1zdWNjZXNzIiBzdHlsZT0id2lkdGg6JScrY2FsKyciIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICAgICArICclXG5cDQogICAgICAgIDwvZGl2PicpOw0KICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgfWVsc2V7DQogICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZnV0dXJlLmdldE1vbnRoKCldOw0KICAgICAgdmFyIG1vblQgPSBmdXR1cmUuZ2V0TW9udGgoKSsxOw0KICAgICAgaWYoaWogPCAobWVtby0gMSkgJiYgZnV0dXJlLmdldE1vbnRoKCkgPD0gY3VycmVudF9Nb250LmdldE1vbnRoKCkpew0KICAgICAgDQogICAgICAgIGlmKGlzRGF0ZUdyZWF0ZXJUaGFuVG9kYXkoZGF0Q2FsbCkgPT09ICdZJyl7DQogICAgICAgICAgICAvLyBhbGVydChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKSsnIC8gJytwYXJzZUZsb2F0KGRheV9zKGRhdGUxMiwgZGF0ZTIyKSkrJ1xuICAgJytwYXJzZUZsb2F0KGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSkpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYoZHkgPj0gZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKXsNCiAgICAgICAgICAgICAgICBhbGVydChjb250YWN0W2ldLmlkKydcbicrZGF0KydcbicrY3VycmVudF9kYXRlKydcbicrZHkrJ1xuJytkYXRlMTIgKydcbicrIGRheV9zKGRhdGUxMiwgY3VycmVudF9kYXRlKSArJ1xuJysgZGF5X3MoZGF0LCBkYXRlMTIpKTsNCiAgICAgICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKSApOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXdhcm5pbmciIHN0eWxlPSJ3aWR0aDolMTAwOyBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjNDkxMjE3OyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrIHBoeXNpY2FsTW9uZXkgICArICdcblwNCiAgICAgICAgPC9kaXY+Jyk7ICAgICAgICAgIA0KICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYocGFyc2VJbnQoY3VycmVudF9kYXRlLmdldERhdGUoKSkgPCBwYXJzZUludChub3cuc3BsaXQoJy0nKVswXSkpew0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVC0xICsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgLy8gIGFsZXJ0KGRheV9zKGRhdCwgZGF0ZTEyKSsnXG4nK2RheV9zKGRhdCwgY3VycmVudF9kYXRlKSsnXG4nK2RhdCsnXG4nK2RhdGUxMik7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCAoIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkudG9GaXhlZCgyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JScrY2FsKyc7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJytwaHlzaWNhbE1vbmV5KyAnXG5cDQogICAgICAgIDwvZGl2PicpOw0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICBpZihwYXJzZUludChjdXJyZW50X2RhdGUuZ2V0TW9udGgoKSkgPT09IHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSl7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBkYXQgPSBuZXcgRGF0ZShtb25UICsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIGRhdGUxMiA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDIpKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgLy8gIGFsZXJ0KGRheV9zKGRhdCwgZGF0ZTEyKSsnXG4nK2RheV9zKGRhdCwgY3VycmVudF9kYXRlKSsnXG4nK2RhdCsnXG4nK2RhdGUxMik7DQogICAgICAgICAgICBwaHlzaWNhbE1vbmV5ID0gKCAoIChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkudG9GaXhlZCgyKTsNCiAgICAgICAgICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCiAgICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JScrY2FsKyc7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgcGh5c2ljYWxNb25leSArICdcblwNCiAgICAgICAgPC9kaXY+Jyk7ICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgIA0KICAgICAgICANCiAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICANCiAgICAvLyAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgIC8vICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgLy8gICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAvLyAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAocGh5c2ljYWxNb25leSArICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgIC8vICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgIC8vICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDolJytjYWwrJyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnIFZWICcrZGF0KycgICcrKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkrJyAgJytwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkgICArICdcblwNCiAgICAvLyAgICAgPC9kaXY+Jyk7DQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfWlmKGlqID4gKG1lbW8tIDEpKXsNCiAgICAgICAgICAgICAgICAgICAgaWYoaXNEYXRlR3JlYXRlclRoYW5Ub2RheShkYXRDYWxsKSA9PT0gJ1knKXsgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICB2YXIgbW9udGhzPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSoxMiA7DQogICAgICAgICAgICB2YXIgbW9udGhfID0gRGF0ZURpZmYuaW5Nb250aHMoZGF0LCBjdXJyZW50X2RhdGUpIC0gbW9udGhzOw0KICAgICAgICAgICAgdmFyIGRheXMgPSBEYXRlRGlmZi5pblllYXJzKGRhdCwgY3VycmVudF9kYXRlKSozNjU7DQogICAgICAgICAgICB2YXIgZHkgPSBEYXRlRGlmZi5pbkRheXMoZGF0LCBjdXJyZW50X2RhdGUpIC0gZGF5czsNCiAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYobW9udGhfID49IDEpew0KICAgICAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAgKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pICk7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctcHJpbWFyeSIgc3R5bGU9IndpZHRoOiUxMDA7IGJvcmRlci1yaWdodDogMXB4IHNvbGlkICM0OTEyMTc7IiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgcGh5c2ljYWxNb25leSAgICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgICAgICAgICAgDQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZihwYXJzZUludChjdXJyZW50X2RhdGUuZ2V0RGF0ZSgpKSA8IHBhcnNlSW50KG5vdy5zcGxpdCgnLScpWzBdKSl7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBkYXQgPSBuZXcgRGF0ZShtb25ULTEgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMSkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXN1Y2Nlc3MiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnK3BoeXNpY2FsTW9uZXkrICdcblwNCiAgICAgICAgPC9kaXY+Jyk7DQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgIGlmKHBhcnNlSW50KGN1cnJlbnRfZGF0ZS5nZXRNb250aCgpKSA9PT0gcGFyc2VJbnQocGFyc2VJbnQobW9udCkgKyBwYXJzZUludChpaikpKXsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGRhdCA9IG5ldyBEYXRlKG1vblQgKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpOw0KICAgICAgICAgICAgZGF0ZTEyID0gbmV3IERhdGUoKGZ1dHVyZS5nZXRNb250aCgpICsgMikrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICAvLyAgYWxlcnQoZGF5X3MoZGF0LCBkYXRlMTIpKydcbicrZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKydcbicrZGF0KydcbicrZGF0ZTEyKTsNCiAgICAgICAgICAgIHBoeXNpY2FsTW9uZXkgPSAoICggKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKS50b0ZpeGVkKDIpOw0KICAgICAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KICAgICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLXN1Y2Nlc3MiIHN0eWxlPSJ3aWR0aDolJytjYWwrJzsgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQ5MTIxNzsiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBwaHlzaWNhbE1vbmV5ICsgJ1xuXA0KICAgICAgICA8L2Rpdj4nKTsgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVCArIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgICAgICAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAgICAgICAgIC8vICBhbGVydChkYXlfcyhkYXQsIGRhdGUxMikrJ1xuJytkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkrJ1xuJytkYXQrJ1xuJytkYXRlMTIpOw0KICAgICAgICAgICAgcGh5c2ljYWxNb25leSA9ICggKCAocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApLnRvRml4ZWQoMik7DQogICAgICAgICAgICB2YXIgY2FsID0gKHBhcnNlRmxvYXQocGFyc2VGbG9hdChwZXIpL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpLnRvRml4ZWQoMik7DQogICAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctc3VjY2VzcyIgc3R5bGU9IndpZHRoOiUnK2NhbCsnOyBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCAjNDkxMjE3OyIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrIHBoeXNpY2FsTW9uZXkgKyAnXG5cDQogICAgICAgIDwvZGl2PicpOyAgDQogICAgICAgIA0KICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIA0KICAgIC8vICAgICAgICAgZGF0ID0gbmV3IERhdGUobW9uVCArIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQogICAgLy8gICAgICAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKTsNCiAgICAvLyAgICAgICAgIC8vICBhbGVydChkYXlfcyhkYXQsIGRhdGUxMikrJ1xuJytkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkrJ1xuJytkYXQrJ1xuJytkYXRlMTIpOw0KICAgIC8vICAgICAgICAgcGh5c2ljYWxNb25leSA9IChwaHlzaWNhbE1vbmV5ICsgKCAocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApLnRvRml4ZWQoMik7DQogICAgLy8gICAgICAgICB2YXIgY2FsID0gKHBhcnNlRmxvYXQocGFyc2VGbG9hdChwZXIpL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpLnRvRml4ZWQoMik7DQogICAgLy8gICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOiUnK2NhbCsnIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgVlYgJytkYXQrJyAgJysocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSsnICAnK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSAgICsgJ1xuXA0KICAgIC8vICAgICA8L2Rpdj4nKTsNCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICANCiAgICAgICAgDQogICAgICAgIA0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9wcmltYXJ5ICAgc3VjY2Vzcw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfWVsc2V7DQovLyAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQovLyAgICAgICAgICAgICQoJyNsb2FkZXInKS5oaWRlKCk7DQogIA0KICAgIH0NCiAgICANCiBmdW5jdGlvbiByb3VuZFVwKG51bSwgcHJlY2lzaW9uKSB7DQogcHJlY2lzaW9uID0gTWF0aC5wb3coMTAsIHByZWNpc2lvbik7DQogcmV0dXJuIE1hdGguY2VpbChudW0gKiBwcmVjaXNpb24pIC8gcHJlY2lzaW9uOw0KfSAgIA0KICAgIA0KICAgIA0KICBTcG9uc29yc2hpcFByb2dyZXNzKCk7DQo8L3NjcmlwdD4NCg0KPGRpdiBjbGFzcz0icm93IiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweCI+DQogPGRpdiBjbGFzcz0iY29udGFpbmVyIj4gICANCjxkaXYgaWQ9ImFjY29yZGlvbjIiPg0KDQogIDxkaXYgY2xhc3M9ImNhcmQiPg0KICAgIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4NCiAgICAgIDxhIGNsYXNzPSJjYXJkLWxpbmsiIGRhdGEtdG9nZ2xlPSJjb2xsYXBzZSIgaHJlZj0iI2NvbGxhcHNlT25lMiIgc3R5bGU9ImZvbnQtc2l6ZToxMnB4OyI+DQogICAgICAgIEFjdGl2ZSBQYWNrYWdlDQogICAgICA8L2E+DQogICAgPC9kaXY+DQogICAgPGRpdiBpZD0iY29sbGFwc2VPbmUyIiBjbGFzcz0iY29sbGFwc2Ugc2hvdyIgZGF0YS1wYXJlbnQ9IiNhY2NvcmRpb24yIj4NCiAgICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+DQogICAgICAgIDxkaXYgaWQ9InNob3dQcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo2cHg7IGZvbnQtc3R5bGU6IG9ibGlxdWU7IGZvbnQtd2VpZ2h0OiBib2xkOyI+DQogICAgICAgICAgICANCiAgICAgICAgICAgIDwhLS08ZGl2IGNsYXNzPSJwcm9ncmVzcyIgc3R5bGU9ImZvbnQtc2l6ZTo3cHg7IiBpZD0icHJvZ3Jlc3NJRCI+LS0+DQogICAgICAgIA0KICAgICAgICAgICAgPCEtLTwvZGl2Pi0tPg0KICAgICAgICAgICAgDQogICAgICAgICAgICANCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KICA8L2Rpdj4NCg0KICA8IS0tPGRpdiBjbGFzcz0iY2FyZCI+LS0+DQogIDwhLS0gIDxkaXYgY2xhc3M9ImNhcmQtaGVhZGVyIj4tLT4NCiAgPCEtLSAgICA8YSBjbGFzcz0iY29sbGFwc2VkIGNhcmQtbGluayIgZGF0YS10b2dnbGU9ImNvbGxhcHNlIiBocmVmPSIjY29sbGFwc2VUd28yIj4tLT4NCiAgPCEtLSAgICAgIEhhcnZlc3RlZC0tPg0KICA8IS0tICAgIDwvYT4tLT4NCiAgPCEtLSAgPC9kaXY+LS0+DQogIDwhLS0gIDxkaXYgaWQ9ImNvbGxhcHNlVHdvMiIgY2xhc3M9ImNvbGxhcHNlIiBkYXRhLXBhcmVudD0iI2FjY29yZGlvbjIiPi0tPg0KICA8IS0tICAgIDxkaXYgY2xhc3M9ImNhcmQtYm9keSI+LS0+DQogIDwhLS0gICAgICBMb3JlbSBpcHN1bS4uLS0+DQogIDwhLS0gICAgPC9kaXY+LS0+DQogIDwhLS0gIDwvZGl2Pi0tPg0KICA8IS0tPC9kaXY+LS0+DQoNCiAgDQo8L2Rpdj4NCjwvZGl2Pg0KICAgIA0KPC9kaXY+DQoNCg0KDQovLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KZnVuY3Rpb24gU3BvbnNvcnNoaXBQcm9ncmVzcygpew0KICAgICAgICAgICAgdmFyIGlkX3Nlc3Npb24gPSAnMSc7DQogICAgICAgICAgICB2YXIgZW1haWxfYWRkcmVzc19zZXNzaW9uID0gJ2xleGRlc2FpbnRAZ21haWwuY29tJzsNCi8vICAgICAgICBhbGVydChlbWFpbF9hZGRyZXNzX3Nlc3Npb24pICAgIDsgICAgDQogICAgICAgICAgICAkLmdldCgnLi9waHAuY29ubmVjdGlvbi9jb25uZWN0LnBocD9sb2FkPXJldHJpZXZlU3BvbnNvcnNoaXAnLHtpZF9zZXNzaW9uOmlkX3Nlc3Npb24sIGVtYWlsX2FkZHJlc3Nfc2Vzc2lvbjplbWFpbF9hZGRyZXNzX3Nlc3Npb259LCBmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzKXsNCiAgICAgICAgICAgICB2YXIgdGhlTW9udGhzID0gbmV3IEFycmF5KCJKYW4iLCAiRmViIiwgIk1hciIsICJBcHIiLCAiTWF5IiwgIkp1biIsICJKdWwiLCAiQXVnIiwgIlNlcCIsICJPY3QiLCAiTm92IiwgIkRlYyIpOw0KICAgICAgICAgICAgICAgIGlmKGRhdGEgIT09ICcnKXsNCi8vICAgICAgICAgICAgICAgIGFsZXJ0KGRhdGEpOw0KICAgICAgICAgICAgdmFyICBjb250YWN0ID0gSlNPTi5wYXJzZShkYXRhKTsNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgIHZhciBqID0gMDsNCiAgICAgICAgLy8gUkVXQVJEICAgMTIsICBET1VCTEUgMjMsICBQUkVNSVVNIDM2DQogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBjb250YWN0Lmxlbmd0aDsgaSsrKXsNCi8vICAgICAgICAgICAgICAgICAgICBpZihteUlkRC50b1N0cmluZygpID09PSBjb250YWN0W2ldLmlkLnRvU3RyaW5nKCkpew0KDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgLy9kYXRlX3JlZ19wcm9kdWN0LCAgIGFtb3VudA0KICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbnVyZSA9IDAgOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgbWVtbyA9IDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwZXIgPSAxMDA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5zdGF0dXMgPT09ICdhY3RpdmUnICYmIGNvbnRhY3RbaV0uaWQgPT09ICc5JyApew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2hvd1Byb2dyZXNzJykuYXBwZW5kKCc8bGFiZWwgY2xhc3M9InB1bGwtbGVmdCIgaWQ9ImhvdycraSsnIiA+Jytjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkrJzwvbGFiZWw+PGxhYmVsIGNsYXNzPSJwdWxsLXJpZ2h0IiBpZD0iQ293JytpKyciID48L2xhYmVsPjxicj4nKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3Nob3dQcm9ncmVzcycpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MiICBpZD0icHJvZ3Jlc3NJRCcraSsnIiAgc3R5bGU9ImZvbnQtc2l6ZToxMXB4OyI+PC9kaXY+PGJyPicpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpID09PSAnUkVXQVJEJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSA3Ow0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdET1VCTEUnKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbnVyZSA9IDIzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtbyA9IDEzOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb250YWN0W2ldLnByb2R1Y3RfbmFtZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgPT09ICdQUkVNSVVNJyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW51cmUgPSAzNjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbW8gPSAxMzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICANCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoY29udGFjdFtpXS5wcm9kdWN0X25hbWUudG9TdHJpbmcoKSsnID09PT09ICAnK3RlbnVyZSsnICAgJytjb250YWN0W2ldLmlkKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnRobHlfcmV0dXJuID0gcGFyc2VGbG9hdCggcGFyc2VGbG9hdChjb250YWN0W2ldLnJldHVybl9tb25leS50b1N0cmluZygpLnNwbGl0KCcsJylbMF0pLzIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IGNvbnRhY3RbaV0uZGF0ZV9yZWdfcHJvZHVjdDsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gMTI7Ly9wYXJzZUludChzdG9yZVByb2R1Y3Rbal0udG9TdHJpbmcoKS5zcGxpdCgnOjo6OicpWzVdKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gID0gNzsvL3BhcnNlSW50KHBhcnNlRmxvYXQoc3RvcmVQcm9kdWN0W2pdLnRvU3RyaW5nKCkuc3BsaXQoJzo6OjonKVs0XSkpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB2YXIgbW9udGhseV9yZXR1cm4gPSA0MDAwLzI7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0b3RhbCA9IDA7IA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXQgPSAnJzsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZFRoZSA7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGUxMjsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9udGhBcnJheXMgPSBbXTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpaiA9IDA7IGlqIDwgKHRlbnVyZSArIDEpOyBpaisrKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaHlzaWNhbE1vbmV5ID0gcGFyc2VGbG9hdChjb250YWN0W2ldLmFtb3VudCk7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vbnQgPSAwOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIGlmKG5vdy5zcGxpdCgnLScpWzFdLmxlbmd0aCA9PT0gMSl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vbnQgPSBwYXJzZUludCgnMCcrbm93LnNwbGl0KCctJylbMV0pIC0gMTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9udCA9IG5vdy5zcGxpdCgnLScpWzFdOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIChtb250ICsgaWopLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICB2YXIgY3VycmVudF9Nb250ID0gbmV3IERhdGUoKTsgICBcDQogICAgdmFyIGRhdDsNCiAgICBpZighaXNWYWxpZERhdGUobm93LnNwbGl0KCctJylbMF0sIGZ1dHVyZS5nZXRNb250aCgpLCBmdXR1cmUuZ2V0RnVsbFllYXIoKSkpew0KICAgICAgICBhbGVydCgnc3Nzc3MnKTsNCiAgICAgICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShmdXR1cmUuZ2V0RnVsbFllYXIoKSwgZnV0dXJlLmdldE1vbnRoKCksIDApOw0KICAgICAgICBkYXQgPSAoKGxhc3REYXkuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSsiLyIrbGFzdERheS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgfWVsc2V7DQogICAgIGRhdCA9IChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkpLnRvU3RyaW5nKCk7DQogICAgDQogICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KG5vdy5zcGxpdCgnLScpWzBdKycgICAnK3BhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSk7ICAvLy50b0ZpeGVkKDIpDQovLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZ1dHVyZSA7DQovLyAgICAgICAgZnV0dXJlID0gbmV3IERhdGUobm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSwgcGFyc2VJbnQocGFyc2VJbnQobW9udCkgKyBwYXJzZUludChpaikpLCBub3cuc3BsaXQoJy0nKVswXSk7ICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICBpZighaXNWYWxpZERhdGUobm93LnNwbGl0KCctJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbm93LnNwbGl0KCctJylbMl0uc3BsaXQoJyAnKVswXSkpew0KLy8vLy8vICAgICAgICAgICANCi8vICAgICAgICAgICB2YXIgbGFzdERheSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgMCk7DQovLy8vLy8gICAgICAgICAgICBmdXR1cmUgPSBuZXcgRGF0ZShmdXR1cmUuZ2V0RnVsbFllYXIoKSwgZnV0dXJlLmdldE1vbnRoKCksIGxhc3REYXkuZ2V0RGF0ZSgpKTsNCi8vLy8gICAgICAgICAgIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbGFzdERheS5nZXREYXRlKCkpOw0KLy8vLyAgICAgICAgICAgIG1vbnRoQXJyYXlzLnB1c2goRGF0ZS5wYXJzZSggICAgKSk7DQovLyAgICAgICAgICAgIGFsZXJ0KCdlZWUgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOw0KLy8gICAgICAgICAgICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgIGZ1dHVyZSA9IG5ldyBEYXRlKG5vdy5zcGxpdCgnLScpWzJdLnNwbGl0KCcgJylbMF0sIHBhcnNlSW50KHBhcnNlSW50KG1vbnQpICsgcGFyc2VJbnQoaWopKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8vLyAgICAgICAgICAgICAgYWxlcnQoJ2ZmZmYgJytwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSkpOyANCi8vICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY29uc29sZS5sb2coZGF0KTsNCi8vICAgICAgIH1lbHNlew0KLy8gICAgICAgICAgIGFsZXJ0KCdkZGQnKTsNCi8vICAgICAgICAgICBmdXR1cmUgPSBuZXcgRGF0ZShub3cuc3BsaXQoJy0nKVsyXS5zcGxpdCgnICcpWzBdLCBwYXJzZUludChwYXJzZUludChtb250KSArIHBhcnNlSW50KGlqKSksIG5vdy5zcGxpdCgnLScpWzBdKTsNCi8vICAgICAgIH0NCi8vICAgIHZhciBjdXJyZW50X01vbnQgPSBuZXcgRGF0ZSgpOyAgICAgIA0KICAgIA0KLy8gICAgdmFyIGQ7IC8vID0gbmV3IERhdGUoZnV0dXJlLmdldEZ1bGxZZWFyKCksIChmdXR1cmUuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICBpZihkYXQgPT09ICcnKXsNCi8vICAgIGRhdCA9IG5ldyBEYXRlKChmdXR1cmUuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7DQovLyAgICBkID0gbmV3IERhdGUoZnV0dXJlLmdldEZ1bGxZZWFyKCksIChmdXR1cmUuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLyAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSApOw0KLy8gICAgfWVsc2V7DQovLyAgICAgICAgZGF0ID0gZGF0ZTEyOw0KLy8vLyAgICAgICAgZCA9IG5ldyBEYXRlKGZ1dHVyZS5nZXRGdWxsWWVhcigpLCAoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8gICAgICAgIA0KLy8vLyAgICAgICAgYWxlcnQoZGF0KydcbiBMRVhYWFhYJyk7DQovLyAgICB9DQogICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0Zyb20gaGVyZQ0KICAgIA0KICAgIA0KICAgIA0KICAgIA0KLy8gICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkYXRlMTIuZ2V0RnVsbFllYXIoKSwgZGF0ZTEyLmdldE1vbnRoKCkrMSwgMCk7DQovLyAgICB2YXIgZGF0ZTEyID0gbmV3IERhdGUoKGQuZ2V0TW9udGgoKSArIDEpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSk7IC8vRGF0ZS5wYXJzZSggKGZ1dHVyZS5nZXRNb250aCgpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSkudG9TdHJpbmcoKSk7DQovLyAgICBpZihpc1ZhbGlkRGF0ZShub3cuc3BsaXQoJy0nKVswXSwgZC5nZXRNb250aCgpLCBkLmdldEZ1bGxZZWFyKCkpKXsgDQovLyAgICBkYXRlMTIgPSBuZXcgRGF0ZSgoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2RhdC5nZXRGdWxsWWVhcigpKTsNCi8vLy8gICAgZC5zZXRNb250aChkYXRlMTIuZ2V0TW9udGgoKSApOw0KLy8gICAgfWVsc2V7DQovLyAgICAgICAgDQovLyAgICAgICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkLmdldEZ1bGxZZWFyKCksIGQuZ2V0TW9udGgoKSwgMCk7DQovLyAgICAgICAgYWxlcnQoJ3NzXG4nKycgICcrbGFzdERheS5nZXREYXRlKCkrJyAgICAgJytsYXN0RGF5LmdldE1vbnRoKCkpOw0KLy8gICAgZGF0ZTEyID0gbmV3IERhdGUoKGQuZ2V0TW9udGgoKSApKyIvIitsYXN0RGF5LmdldERhdGUoKSsiLyIrZC5nZXRGdWxsWWVhcigpKTsgLy9EYXRlLnBhcnNlKCAoZnV0dXJlLmdldE1vbnRoKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpKTsgICAgICAgICANCi8vICAgIGFsZXJ0KCdzc1xuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXRlMTIuZ2V0TW9udGgoKSk7DQovLy8vICAgICBkID0gbmV3IERhdGUoZGF0ZTEyLmdldEZ1bGxZZWFyKCksIChkYXRlMTIuZ2V0TW9udGgoKSArIDEpLCBub3cuc3BsaXQoJy0nKVswXSk7DQovLy8vICAgICBkLnNldE1vbnRoKGQuZ2V0TW9udGgoKSApOw0KLy8gICAgZCA9IG5ldyBEYXRlKGZ1dHVyZS5nZXRGdWxsWWVhcigpLCAoZnV0dXJlLmdldE1vbnRoKCkgKyAxKSwgbm93LnNwbGl0KCctJylbMF0pOw0KLy8gICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgKTsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQovLyAgICAgICAgICAgICAgICAgICAgICAgIGVsc2V7DQovLyAgICAgICAgICAgICAgDQovLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRUaGUgPT09ICcnKXsNCi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnc3d3dyAnKyhkLmdldE1vbnRoKCkgKzEpKTsNCi8vdmFyIGRhdGUxMiA9IG5ldyBEYXRlKChkYXQuZ2V0TW9udGgoKSArMSApKyIvIitub3cuc3BsaXQoJy0nKVswXSsiLyIrZC5nZXRGdWxsWWVhcigpKTsgLy9EYXRlLnBhcnNlKCAoZnV0dXJlLmdldE1vbnRoKCkrIi8iK2Z1dHVyZS5nZXREYXRlKCkrIi8iK2Z1dHVyZS5nZXRGdWxsWWVhcigpKS50b1N0cmluZygpKTsgICAgICAgICANCi8vICAgIGFsZXJ0KCdzc1paWlxuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXQuZ2V0TW9udGgoKSk7DQovLy8vICAgIGRUaGUgPSBkYXRlMTIuZ2V0TW9udGgoKTsNCi8vLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYoZFRoZSAhPT0gZGF0ZTEyLmdldE1vbnRoKCkgJiYgZFRoZSAhPT0gJycpew0KLy8vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ3N3d3cgJytkVGhlKycgIT09ICcrZGF0ZTEyLmdldE1vbnRoKCkpOw0KLy8vL3ZhciBkYXRlMTIgPSBuZXcgRGF0ZSgoZC5nZXRNb250aCgpICkrIi8iK25vdy5zcGxpdCgnLScpWzBdKyIvIitkLmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOyAgICAgICAgIA0KLy8vLyAgICBhbGVydCgnc3NaQ0NDQ0NaWlxuJysnICAnK2RhdGUxMi5nZXREYXRlKCkrJyAgICAgJytkYXRlMTIuZ2V0TW9udGgoKSk7DQovLy8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlew0KLy8vLyAgICAgICAgIGFsZXJ0KCdzd3d3Jyk7DQovLy8vdmFyIGRhdGUxMiA9IG5ldyBEYXRlKChkLmdldE1vbnRoKCkgKSsiLyIrbm93LnNwbGl0KCctJylbMF0rIi8iK2QuZ2V0RnVsbFllYXIoKSk7IC8vRGF0ZS5wYXJzZSggKGZ1dHVyZS5nZXRNb250aCgpKyIvIitmdXR1cmUuZ2V0RGF0ZSgpKyIvIitmdXR1cmUuZ2V0RnVsbFllYXIoKSkudG9TdHJpbmcoKSk7ICAgICAgICAgDQovLy8vICAgIGFsZXJ0KCdzc1pXV1dXV1paXG4nKycgICcrZGF0ZTEyLmdldERhdGUoKSsnICAgICAnK2RhdGUxMi5nZXRNb250aCgpKTsNCi8vLy8gICAgICAgICAgICAgICAgICAgICAgICB9DQovLyAgICAgICAgICAgICAgICAgICAgfQ0KICAgICANCiAgICAgDQogICAgDQovLyAgICB0aWxsIGhlcmUNCiAgICANCi8vICAgIHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgoY3VycmVudF9Nb250LmdldE1vbnRoKCkgKyAxKSsiLyIrY3VycmVudF9Nb250LmdldERhdGUoKSsiLyIrY3VycmVudF9Nb250LmdldEZ1bGxZZWFyKCkpOyAvL0RhdGUucGFyc2UoIChmdXR1cmUuZ2V0TW9udGgoKSsiLyIrZnV0dXJlLmdldERhdGUoKSsiLyIrZnV0dXJlLmdldEZ1bGxZZWFyKCkpLnRvU3RyaW5nKCkpOw0KLy8gICAgY29uc29sZS5sb2coZGF0LCAnIE5FWFIgJywgZGF0ZTEyKTsNCi8vICAgIGNvbnNvbGUubG9nKCdIZXJlICcsIGZ1dHVyZSk7DQogIA0KLy8gIGlmIChpaiA9PT0gKHRlbnVyZSAtIDEgKSApew0KLy8gICAgICB2YXIgbW9udGggPSB0aGVNb250aHNbZGF0ZTEyLmdldE1vbnRoKCldOw0KLy8gICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8gICAgIC8vDQovLyAgICAgDQovLyAgICAgaWYoIWlzVmFsaWREYXRlKGRhdGUxMi5nZXREYXRlKCksIGRhdGUxMi5nZXRNb250aCgpLCBkYXRlMTIuZ2V0RnVsbFllYXIoKSkpew0KLy8gICAgICAgICANCi8vICAgICB9DQovLyAgICAgaWYoZGF0ZUNoZWNrKGRhdCxkYXRlMTIsY3VycmVudF9Nb250KSl7DQovLy8vICAgIGFsZXJ0KCJBdmFpbGVkXG4iK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSsnXG4nK3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSk7DQovL3RvdGFsID0gdG90YWwgKyAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICk7DQovLyAgICAgICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KLy8gICAgJCgnI3Byb2dyZXNzSUQnK2kpLmFwcGVuZCgnPGRpdiBjbGFzcz0icHJvZ3Jlc3MtYmFyIGJnLWRhcmsiIHN0eWxlPSJ3aWR0aDonK2NhbCsnJSIgaWQ9IicrbW9udGgrJyI+Jyttb250aCsnICcrICggKCgocGFyc2VGbG9hdChtb250aGx5X3JldHVybikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkgICApKS50b0ZpeGVkKDIpICAgICArICdcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIA0KLy8gICAgfWVsc2UgaWYoZGF0ZUNoZWNrQ3VycmVudChkYXQsZGF0ZTEyLGN1cnJlbnRfTW9udCkpew0KLy8gICAgYWxlcnQoIk5vdCBBdmFpbGVkIDIiKTsNCi8vICAgIHRvdGFsID0gdG90YWwgKyBwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKTsNCi8vICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy13YXJuaW5nIiBzdHlsZT0id2lkdGg6JytwZXIrJyUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyBtb250aGx5X3JldHVybiArJ1xuXA0KLy8gICAgICAgIDwvZGl2PicpOw0KLy8gICAgfQ0KLy8gICAgIC8vDQovLyAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vDQovLyAgfWVsc2V7DQovLyAgICAgIHZhciBtb250aCA9IHRoZU1vbnRoc1tkYXRlMTIuZ2V0TW9udGgoKV07DQovLy8vICAgICAgdmFyIG1vblQgPSBmdXR1cmUuZ2V0TW9udGgoKSsxOw0KLy8gICAgICBpZihpaiA8PSAobWVtby0gMSkpew0KLy8gICAgICAgICAgDQovLyAgICAgICAgICBpZihkYXRlQ2hlY2soZGF0LGRhdGUxMixjdXJyZW50X01vbnQpKXsNCi8vLy8gICAgYWxlcnQoIkF2YWlsZWRcbiIrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKydcbicrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vLy8gICAgdmFyIGxhc3REYXkgPSBuZXcgRGF0ZShkYXRlMTIuZ2V0RnVsbFllYXIoKSwgZGF0ZTEyLmdldE1vbnRoKCkrMSwgMCk7DQovLy8vICAgIGFsZXJ0KGxhc3REYXkuZ2V0RGF0ZSgpKycgICAgICcrbGFzdERheS5nZXRNb250aCgpKycgICcrZGF0ZTEyLmdldE1vbnRoKCkpOw0KLy8gICAgdmFyIGNhbCA9IChwYXJzZUZsb2F0KHBhcnNlRmxvYXQocGVyKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKS50b0ZpeGVkKDIpOw0KLy8gICAgdG90YWwgPSB0b3RhbCArICgoKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKTsNCi8vICAgICQoJyNwcm9ncmVzc0lEJytpKS5hcHBlbmQoJzxkaXYgY2xhc3M9InByb2dyZXNzLWJhciBiZy1kYXJrIiBzdHlsZT0id2lkdGg6JytjYWwrJyUiIGlkPSInK21vbnRoKyciPicrbW9udGgrJyAnKyAoICgoKHBhcnNlRmxvYXQobW9udGhseV9yZXR1cm4pL3BhcnNlRmxvYXQoZGF5X3MoZGF0LCBkYXRlMTIpKSkgKiBwYXJzZUZsb2F0KGRheV9zKGRhdCwgY3VycmVudF9kYXRlKSkpICAgKSkudG9GaXhlZCgyKSAgICAgKyAnXG5cDQovLyAgICAgICAgPC9kaXY+Jyk7DQovLyAgICB9ZWxzZSBpZihkYXRlQ2hlY2tDdXJyZW50KGRhdCxkYXRlMTIsY3VycmVudF9Nb250KSl7DQovLy8vICAgIGFsZXJ0KCJOb3QgQXZhaWxlZCAyIik7DQovLyAgICB0b3RhbCA9IHRvdGFsICsgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctd2FybmluZyIgc3R5bGU9IndpZHRoOicrcGVyKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgbW9udGhseV9yZXR1cm4gKydcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIH0NCi8vICAgICAgICAgIA0KLy8gICAgICAgICAgDQovLw0KLy8gICAgICAgICAgICAgICAgfWlmKGlqID4gKG1lbW8tIDEpKXsNCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8vLw0KLy9pZihkYXRlQ2hlY2soZGF0LGRhdGUxMixjdXJyZW50X01vbnQpKXsNCi8vLy8gICAgYWxlcnQoIkF2YWlsZWRcbiIrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKydcbicrcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKTsNCi8vICAgIHZhciBjYWwgPSAocGFyc2VGbG9hdChwYXJzZUZsb2F0KHBlcikvcGFyc2VGbG9hdChkYXlfcyhkYXQsIGRhdGUxMikpKSAqIHBhcnNlRmxvYXQoZGF5X3MoZGF0LCBjdXJyZW50X2RhdGUpKSkudG9GaXhlZCgyKTsNCi8vICAgIHRvdGFsID0gdG90YWwgKyAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICk7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctZGFyayIgc3R5bGU9IndpZHRoOicrY2FsKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgKCAoKChwYXJzZUZsb2F0KG1vbnRobHlfcmV0dXJuKS9wYXJzZUZsb2F0KGRheV9zKGRhdCwgZGF0ZTEyKSkpICogcGFyc2VGbG9hdChkYXlfcyhkYXQsIGN1cnJlbnRfZGF0ZSkpKSAgICkpLnRvRml4ZWQoMikgICAgICsgJ1xuXA0KLy8gICAgICAgIDwvZGl2PicpOw0KLy8gICAgfWVsc2UgaWYoZGF0ZUNoZWNrQ3VycmVudChkYXQsZGF0ZTEyLGN1cnJlbnRfTW9udCkpew0KLy8vLyAgICBhbGVydCgiTm90IEF2YWlsZWQgMiIpOw0KLy90b3RhbCA9IHRvdGFsICsgcGFyc2VGbG9hdChtb250aGx5X3JldHVybik7DQovLyAgICAkKCcjcHJvZ3Jlc3NJRCcraSkuYXBwZW5kKCc8ZGl2IGNsYXNzPSJwcm9ncmVzcy1iYXIgYmctd2FybmluZyIgc3R5bGU9IndpZHRoOicrcGVyKyclIiBpZD0iJyttb250aCsnIj4nK21vbnRoKycgJysgbW9udGhseV9yZXR1cm4gKydcblwNCi8vICAgICAgICA8L2Rpdj4nKTsNCi8vICAgIH0NCi8vLy8NCi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLw0KLy8gICAgICAgICAgICAgICAgfQ0KLy8gICAgICAgICAgICB9DQoNCn0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI0NvdycraSkudGV4dCgnVG90YWwgOiAnK3RvdGFsLnRvRml4ZWQoMikpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL3ByaW1hcnkgICBzdWNjZXNzDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgICANCi8vICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9ZWxzZXsNCi8vICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIA0KLy8gICAgICAgICAgICAkKCcjbG9hZGVyJykuaGlkZSgpOw0KICANCiAgICB9';
//Usage example:
urltoFile(vvv, 'a.txt')
.then(function(file){
    const files = new File([file], "c.txt" ,{type: 'text/plain'});
//    exportToTxt(file, '.txt');
//    console.log(file);
})
       </script>
       
       <input type="Button" value="Create File" onClick='createFile()'>
       <input id="myFileInput" type="file">    
       <button id="myBtn" type="button" onclick="getByteArray();">Try it</button>
<span id="file"></span>
 <?php
// document
$myfile = fopen("./icon/newfile.txt", "w") or die("Unable to open file!");
$txt = "John Doe\n";
fwrite($myfile, $txt);
$txt = "Jane Doe\n";
fwrite($myfile, $txt);
fclose($myfile);
?> 
    </body>
</html>
